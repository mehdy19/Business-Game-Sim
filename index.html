<!doctype html>
<html lang="ar">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ - Ø±Ø­Ù„Ø© Ø§Ù„Ù†Ù…Ùˆ</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body { 
            font-family: 'Tajawal', 'Cairo', 'Amiri', 'Noto Sans Arabic', sans-serif; 
            direction: rtl;
            box-sizing: border-box;
        }
        .ltr { direction: ltr; }
        
        /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„ØªÙØ§Ø¹Ù„Ø§Øª */
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #1d4ed8, #1e40af);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }
        
        .hover-scale {
            transition: all 0.3s ease;
        }
        
        .hover-scale:hover {
            transform: scale(1.05);
        }
        
        .animate-wiggle {
            animation: wiggle 2s ease-in-out infinite;
        }
        
        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(1deg); }
            75% { transform: rotate(-1deg); }
        }
        
        .animate-pulse-custom {
            animation: pulse-custom 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse-custom {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        .card-gradient {
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            border: 1px solid #e2e8f0;
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„Ø§Øª */
        .input-enhanced {
            transition: all 0.3s ease;
            border: 2px solid #e2e8f0;
        }
        
        .input-enhanced:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            transform: scale(1.02);
        }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
        .notification-enter {
            animation: slideInRight 0.5s ease-out;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„ØªØ¯Ø±Ø¬Ø§Øª */
        .bg-success { background: linear-gradient(135deg, #10b981, #059669); }
        .bg-warning { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .bg-danger { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .bg-info { background: linear-gradient(135deg, #06b6d4, #0891b2); }
        
        /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù†ØµÙˆØµ */
        .text-shadow {
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª */
        .level-badge {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(139, 92, 246, 0.5); }
            to { box-shadow: 0 0 30px rgba(139, 92, 246, 0.8); }
        }

        .level-up-animation {
            animation: levelUp 1s ease-out;
        }

        @keyframes levelUp {
            0% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.2) rotate(5deg); opacity: 0.8; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .market-expansion {
            animation: expand 0.8s ease-out;
        }

        @keyframes expand {
            0% { transform: scale(0.8); opacity: 0.5; }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="bg-gray-50 min-h-screen">
  <div id="root"></div>
  <script type="text/babel">
        const { useState, useEffect } = React;

        // Game Constants
        const GAME_CONFIG = {
            STARTUP_COSTS: 20000,
            WORKSHOP_RENT: 5000,
            WORKER_MONTHLY_SALARY: 1000,
            INITIAL_WORKERS: 5,
            LOAN_INTEREST_RATE: 0.15,
            LOAN_PENALTY_RATE: 0.05,
            LOAN_DURATION_MONTHS: 24,
            MAX_LOANS: 5,
            LABOR_VIOLATION_FINE: 8000,
            RECRUITMENT_COST: 500,
            PRODUCTION_PER_WORKER: 20,
            RAW_UNIT_COST: 25,
            VARIABLE_COST_PER_UNIT: 15,
            FIXED_WEEKLY_COST: 1000,
            BASE_DEMAND: 80,
            REFERENCE_PRICE: 85,
            PRICE_ELASTICITY: 1.2,
            MARKETING_COST_PER_CUSTOMER: 8,
            BLACK_MARKET_PREMIUM_MIN: 0.25,
            BLACK_MARKET_PREMIUM_MAX: 0.45,
            BLACK_MARKET_SUCCESS: 0.55,
            BLACK_MARKET_FINE: 0.25,
            BLACK_MARKET_DEFAULT: 0.20,
            FINE_AMOUNT: 3000,
            COMPLIANCE_DROP_BLACK_MARKET: 5,
            COMPLIANCE_DROP_FINE: 15,
            CSAT_DROP_STOCKOUT: 10,
            CSAT_DROP_OVERPRICING: 8,
            CSAT_RECOVERY: 2,
            GROWTH_MULTIPLE: 12,
            CUSTOMER_COMPENSATION_COST: 5000,
            CUSTOMER_COMPENSATION_BOOST: 15,
            QUALITY_IMPROVEMENT_COST: 8000,
            QUALITY_IMPROVEMENT_WEEKS: 4,
            QUALITY_IMPROVEMENT_WEEKLY_BOOST: 5,
            NATURAL_RECOVERY_RATE: 2
        };

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯
        const LEVELS = {
            1: {
                name: "Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù†Ø§Ø´Ø¦Ø©",
                icon: "ğŸŒ±",
                description: "Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ ÙƒØ±Ø¦ÙŠØ³ ØªÙ†ÙÙŠØ°ÙŠ",
                marketMultiplier: 1,
                maxWorkers: 20,
                features: ["Ø§Ù„Ù‚Ø±ÙˆØ¶ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©", "Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù…Ø­Ù„ÙŠ", "Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ø¨Ø³ÙŠØ·"],
                unlocks: [],
                challenges: ["ØªØ¹Ù„Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª", "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ù‚Ø¯", "Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª"],
                bgColor: "from-green-50 to-blue-100",
                cardColor: "border-green-300 bg-green-50"
            },
            2: {
                name: "Ø§Ù„ØªÙˆØ³Ø¹ Ø§Ù„Ù…Ø­Ù„ÙŠ",
                icon: "ğŸª",
                description: "ØªÙˆØ³Ø¹ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù…Ø­Ù„ÙŠ ÙˆØ·ÙˆØ± Ø¹Ù…Ù„ÙŠØ§ØªÙƒ",
                marketMultiplier: 1.5,
                maxWorkers: 50,
                features: ["Ù…ØªØ§Ø¬Ø± Ø§Ù„ØªØ¬Ø²Ø¦Ø©", "Ø­Ù…Ù„Ø§Øª Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©", "ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø©"],
                unlocks: ["Ù…ØªØ§Ø¬Ø± Ø§Ù„ØªØ¬Ø²Ø¦Ø©", "Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ", "Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ÙˆÙ„Ø§Ø¡"],
                challenges: ["Ø§Ù„Ù…Ù†Ø§ÙØ³Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ©", "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†", "Ø±Ø¶Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"],
                bgColor: "from-blue-50 to-purple-100",
                cardColor: "border-blue-300 bg-blue-50"
            },
            3: {
                name: "Ø§Ù„ØªÙˆØ³Ø¹ Ø§Ù„Ø¥Ù‚Ù„ÙŠÙ…ÙŠ",
                icon: "ğŸŒ",
                description: "Ø§ÙƒØªØ´Ù Ø£Ø³ÙˆØ§Ù‚ Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ·ÙˆØ± Ù…Ù†ØªØ¬Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©",
                marketMultiplier: 2.5,
                maxWorkers: 100,
                features: ["Ø£Ø³ÙˆØ§Ù‚ Ù…ØªØ¹Ø¯Ø¯Ø©", "Ø®Ø·ÙˆØ· Ø¥Ù†ØªØ§Ø¬ Ù…ØªÙ†ÙˆØ¹Ø©", "Ø´Ø±Ø§ÙƒØ§Øª Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©"],
                unlocks: ["Ø§Ù„ØªØµØ¯ÙŠØ±", "Ù…Ù†ØªØ¬Ø§Øª Ù…ØªÙ…ÙŠØ²Ø©", "Ù…Ø±Ø§ÙƒØ² Ø§Ù„ØªÙˆØ²ÙŠØ¹"],
                challenges: ["Ø§Ù„ØªÙ†ÙˆØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ", "Ø¥Ø¯Ø§Ø±Ø© Ø³Ù„Ø³Ù„Ø© Ø§Ù„ØªÙˆØ±ÙŠØ¯", "Ø§Ù„ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ø¹Ù‚Ø¯"],
                bgColor: "from-purple-50 to-pink-100",
                cardColor: "border-purple-300 bg-purple-50"
            },
            4: {
                name: "Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„ÙƒØ¨Ø±Ù‰",
                icon: "ğŸ¢",
                description: "Ø£ØµØ¨Ø­ Ù„Ø§Ø¹Ø¨Ø§Ù‹ Ø±Ø¦ÙŠØ³ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚",
                marketMultiplier: 4,
                maxWorkers: 200,
                features: ["Ø§Ù„Ø§Ø³ØªØ­ÙˆØ§Ø°Ø§Øª", "Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±", "Ø§Ù„Ø£Ø³ÙˆØ§Ù‚ Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©"],
                unlocks: ["Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†", "Ù…Ø®ØªØ¨Ø± Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø±", "Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©"],
                challenges: ["Ø§Ù„Ù…Ù†Ø§ÙØ³Ø© Ø§Ù„Ø´Ø±Ø³Ø©", "Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø± Ø§Ù„Ù…Ø³ØªÙ…Ø±", "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø²Ù…Ø§Øª"],
                bgColor: "from-pink-50 to-red-100",
                cardColor: "border-pink-300 bg-pink-50"
            },
            5: {
                name: "Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©",
                icon: "ğŸ‘‘",
                description: "Ù‡ÙŠÙ…Ù† Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆÙ‚ ÙˆØ§Ø¨Ù†ÙŠ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØªÙƒ",
                marketMultiplier: 6,
                maxWorkers: 500,
                features: ["Ø§Ù„Ù‡ÙŠÙ…Ù†Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆÙ‚", "Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù†Ø§Ø´Ø¦Ø©", "Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ø³ÙŠØ§Ø³ÙŠ"],
                unlocks: ["ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±", "Ø§Ù„Ù„ÙˆØ¨ÙŠ Ø§Ù„Ø³ÙŠØ§Ø³ÙŠ", "Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©"],
                challenges: ["Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø§Ø­ØªÙƒØ§Ø±", "Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©", "Ø§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø©"],
                bgColor: "from-yellow-50 to-orange-100",
                cardColor: "border-yellow-300 bg-yellow-50"
            }
        };

        // Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
        const LEVEL_FEATURES = {
            2: {
                retailStores: {
                    name: "Ù…ØªØ§Ø¬Ø± Ø§Ù„ØªØ¬Ø²Ø¦Ø©",
                    cost: 50000,
                    monthlyRevenue: 8000,
                    description: "Ø§ÙØªØ­ Ù…ØªØ§Ø¬Ø± Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª"
                },
                digitalMarketing: {
                    name: "Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ",
                    cost: 15000,
                    efficiency: 1.5,
                    description: "Ø­Ù…Ù„Ø§Øª ØªØ³ÙˆÙŠÙ‚ Ø£ÙƒØ«Ø± ÙØ¹Ø§Ù„ÙŠØ©"
                }
            },
            3: {
                export: {
                    name: "Ø§Ù„ØªØµØ¯ÙŠØ±",
                    cost: 100000,
                    marketBonus: 0.8,
                    description: "ØµØ¯Ø± Ù…Ù†ØªØ¬Ø§ØªÙƒ Ù„Ù„Ø£Ø³ÙˆØ§Ù‚ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©"
                },
                premiumProducts: {
                    name: "Ù…Ù†ØªØ¬Ø§Øª Ù…ØªÙ…ÙŠØ²Ø©",
                    cost: 75000,
                    priceBonus: 0.4,
                    description: "Ø·ÙˆØ± Ù…Ù†ØªØ¬Ø§Øª Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø©"
                }
            },
            4: {
                acquisitions: {
                    name: "Ø§Ù„Ø§Ø³ØªØ­ÙˆØ§Ø°Ø§Øª",
                    cost: 500000,
                    capacityBonus: 1.5,
                    description: "Ø§Ø´ØªØ± Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©"
                },
                rnd: {
                    name: "Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±",
                    cost: 200000,
                    innovationBonus: 0.3,
                    description: "Ø§Ø³ØªØ«Ù…Ø± ÙÙŠ Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø±"
                }
            },
            5: {
                monopoly: {
                    name: "Ø§Ù„Ù‡ÙŠÙ…Ù†Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆÙ‚",
                    cost: 1000000,
                    marketControl: 0.6,
                    description: "Ø³ÙŠØ·Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆÙ‚ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„"
                },
                venture: {
                    name: "ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±",
                    cost: 750000,
                    passiveIncome: 50000,
                    description: "Ø§Ø³ØªØ«Ù…Ø± ÙÙŠ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù†Ø§Ø´Ø¦Ø©"
                }
            }
        };

        const DAYS = ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³'];
        const DAY_ACTIVITIES = {
            0: 'Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª',
            1: 'ØªØ®Ø·ÙŠØ· Ø§Ù„Ø¥Ù†ØªØ§Ø¬',
            2: 'ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥Ù†ØªØ§Ø¬',
            3: 'Ø§Ù„ØªØ³Ø¹ÙŠØ± ÙˆØ§Ù„ØªØ³ÙˆÙŠÙ‚',
            4: 'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª'
        };

        // Ø£Ø­Ø¯Ø§Ø« Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù…ØªØ¯Ø±Ø¬Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
        const RANDOM_EVENTS = {
            1: [
                { name: 'Ø§Ø±ØªÙØ§Ø¹ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…', effect: { rawUnitCost: 1.2 }, description: 'Ø§Ø±ØªÙØ¹Øª ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† Ø¨Ù†Ø³Ø¨Ø© 20%' },
                { name: 'Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø­Ù„ÙŠ', effect: { baseDemand: 1.3 }, description: 'Ø§Ø²Ø¯Ø§Ø¯ Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù…Ø­Ù„ÙŠ Ø¨Ù†Ø³Ø¨Ø© 30%' },
                { name: 'Ø¹Ø·Ù„ Ø¨Ø³ÙŠØ· ÙÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª', effect: { capacity: 0.8 }, description: 'Ø§Ù†Ø®ÙØ¶Øª Ø§Ù„Ù‚Ø¯Ø±Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ø¨Ù†Ø³Ø¨Ø© 20%' }
            ],
            2: [
                { name: 'Ù…Ù†Ø§ÙØ³ Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚', effect: { baseDemand: 0.7 }, description: 'Ù…Ù†Ø§ÙØ³ Ø¬Ø¯ÙŠØ¯ Ù‚Ù„Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø³Ø¨Ø© 30%' },
                { name: 'Ø­Ù…Ù„Ø© Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© Ù†Ø§Ø¬Ø­Ø©', effect: { baseDemand: 1.5, csat: 10 }, description: 'Ø­Ù…Ù„Ø© Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© Ø²Ø§Ø¯Øª Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ù„Ø±Ø¶Ø§' },
                { name: 'Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø³Ù„Ø³Ù„Ø© Ø§Ù„ØªÙˆØ±ÙŠØ¯', effect: { rawUnitCost: 1.4, variableCost: 1.2 }, description: 'Ø§Ø¶Ø·Ø±Ø§Ø¨Ø§Øª ÙÙŠ Ø§Ù„ØªÙˆØ±ÙŠØ¯ Ø²Ø§Ø¯Øª Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ' }
            ],
            3: [
                { name: 'Ø£Ø²Ù…Ø© Ø§Ù‚ØªØµØ§Ø¯ÙŠØ© Ø¥Ù‚Ù„ÙŠÙ…ÙŠØ©', effect: { baseDemand: 0.6, cash: -50000 }, description: 'Ø£Ø²Ù…Ø© Ø§Ù‚ØªØµØ§Ø¯ÙŠØ© Ø£Ø«Ø±Øª Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ù„Ø³ÙŠÙˆÙ„Ø©' },
                { name: 'ÙØ±ØµØ© ØªØµØ¯ÙŠØ± ÙƒØ¨ÙŠØ±Ø©', effect: { baseDemand: 2.0, cash: 75000 }, description: 'Ø¹Ù‚Ø¯ ØªØµØ¯ÙŠØ± ÙƒØ¨ÙŠØ± Ø²Ø§Ø¯ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª' },
                { name: 'ØªØºÙŠÙŠØ±Ø§Øª ØªÙ†Ø¸ÙŠÙ…ÙŠØ©', effect: { compliance: -30, cash: -25000 }, description: 'Ù‚ÙˆØ§Ù†ÙŠÙ† Ø¬Ø¯ÙŠØ¯Ø© ØªØªØ·Ù„Ø¨ ØªÙƒØ§Ù„ÙŠÙ Ø§Ù…ØªØ«Ø§Ù„' }
            ],
            4: [
                { name: 'Ø­Ø±Ø¨ Ø£Ø³Ø¹Ø§Ø± Ù…Ø¹ Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†', effect: { baseDemand: 0.5, variableCost: 1.3 }, description: 'Ø­Ø±Ø¨ Ø£Ø³Ø¹Ø§Ø± Ø´Ø±Ø³Ø© Ù‚Ù„Ù„Øª Ø§Ù„Ù‡ÙˆØ§Ù…Ø´' },
                { name: 'Ø§Ø®ØªØ±Ø§Ù‚ ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠ', effect: { capacity: 1.8, variableCost: 0.7 }, description: 'ØªÙ‚Ù†ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ø­Ø³Ù†Øª Ø§Ù„ÙƒÙØ§Ø¡Ø©' },
                { name: 'ÙØ¶ÙŠØ­Ø© ÙÙŠ Ø§Ù„ØµÙ†Ø§Ø¹Ø©', effect: { csat: -25, compliance: -20 }, description: 'ÙØ¶ÙŠØ­Ø© ØµÙ†Ø§Ø¹ÙŠØ© Ø£Ø¶Ø±Øª Ø¨Ø§Ù„Ø«Ù‚Ø©' }
            ],
            5: [
                { name: 'ØªØ­Ù‚ÙŠÙ‚ Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø§Ø­ØªÙƒØ§Ø±', effect: { cash: -200000, compliance: -40 }, description: 'ØªØ­Ù‚ÙŠÙ‚ Ø­ÙƒÙˆÙ…ÙŠ ÙÙŠ Ù…Ù…Ø§Ø±Ø³Ø§Øª Ø§Ù„Ø§Ø­ØªÙƒØ§Ø±' },
                { name: 'Ø«ÙˆØ±Ø© ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ©', effect: { capacity: 2.5, baseDemand: 1.8 }, description: 'Ø«ÙˆØ±Ø© ØªÙ‚Ù†ÙŠØ© ØºÙŠØ±Øª Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø©' },
                { name: 'Ø£Ø²Ù…Ø© Ø¹Ø§Ù„Ù…ÙŠØ©', effect: { baseDemand: 0.4, cash: -300000 }, description: 'Ø£Ø²Ù…Ø© Ø¹Ø§Ù„Ù…ÙŠØ© Ø£Ø«Ø±Øª Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³ÙˆØ§Ù‚' }
            ]
        };

        function CEOSimulation() {
            const [gameStarted, setGameStarted] = useState(false);
            const [setupComplete, setSetupComplete] = useState(false);
            const [companyName, setCompanyName] = useState('');
            const [hasSavedGame, setHasSavedGame] = useState(false);
            const [showLevelUp, setShowLevelUp] = useState(false);
            const [setupConfig, setSetupConfig] = useState({
                loanAmount: 80000,
                initialWorkers: 5
            });
            const [gameState, setGameState] = useState({
                month: 1,
                week: 1,
                day: 0,
                level: 1,
                cash: 0,
                loans: [],
                rawInventory: 0,
                finishedInventory: 0,
                compliance: 100,
                customerSatisfaction: 100,
                monthlyProfit: 0,
                loansUsed: 0,
                workers: 0,
                capacity: 0,
                rawUnitCost: GAME_CONFIG.RAW_UNIT_COST,
                variableCost: GAME_CONFIG.VARIABLE_COST_PER_UNIT,
                baseDemand: GAME_CONFIG.BASE_DEMAND,
                procurementAmount: 0,
                plannedProduction: 0,
                unitPrice: GAME_CONFIG.REFERENCE_PRICE,
                marketingSpend: 0,
                salesChannel: 'legal',
                weekResults: [],
                currentEvent: null,
                salariesPaid: true,
                rentPaid: true,
                workersToHire: 0,
                gameEnded: false,
                endReason: '',
                qualityImprovement: null,
                unpaidSalaryMonths: 0,
                lastLaborViolation: null,
                // Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                levelFeatures: {
                    retailStores: 0,
                    digitalMarketing: false,
                    export: false,
                    premiumProducts: false,
                    acquisitions: 0,
                    rnd: false,
                    monopoly: false,
                    venture: false
                },
                totalRevenue: 0,
                marketShare: 0.1
            });

            const [inputs, setInputs] = useState({
                procurement: 0,
                production: 0,
                price: GAME_CONFIG.REFERENCE_PRICE,
                marketing: 0,
                hireWorkers: 0
            });

            const getCurrentLevel = () => LEVELS[gameState.level] || LEVELS[1];
            const getMarketMultiplier = () => getCurrentLevel().marketMultiplier;
            const getMaxWorkers = () => getCurrentLevel().maxWorkers;

            const calculateTotalDebt = () => {
                return gameState.loans.reduce((total, loan) => total + loan.totalDebt, 0);
            };

            const calculateMonthlyPayments = () => {
                return gameState.loans.reduce((total, loan) => total + loan.monthlyPayment, 0);
            };

            const calculateLoanDuration = (amount) => {
                if (amount <= 100000) return 24;
                if (amount <= 200000) return 36;
                if (amount <= 300000) return 48;
                if (amount <= 500000) return 60;
                return 24;
            };

            const calculateEV = () => {
                // 1. Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© (Ø¢Ø®Ø± 3 Ø£Ø´Ù‡Ø± Ø£Ùˆ Ø§Ù„Ù…ØªØ§Ø­)
                const monthsToConsider = Math.min(3, gameState.month);
                const avgMonthlyRevenue = monthsToConsider > 0 ? gameState.totalRevenue / gameState.month : 0;
                
                // 2. Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ø§Ù„Ø«Ø§Ø¨ØªØ©
                const monthlyCosts = (gameState.workers * GAME_CONFIG.WORKER_MONTHLY_SALARY) + 
                                   GAME_CONFIG.WORKSHOP_RENT + 
                                   calculateMonthlyPayments();
                
                // 3. Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ø´Ù‡Ø±ÙŠ Ø§Ù„Ù…Ù‚Ø¯Ø±
                const estimatedMonthlyProfit = Math.max(0, avgMonthlyRevenue - monthlyCosts);
                
                // 4. Ù…Ø¶Ø§Ø¹Ù Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ÙˆØ§Ù„Ø£Ø¯Ø§Ø¡
                let valuationMultiple = 8; // Ù…Ø¶Ø§Ø¹Ù Ø£Ø³Ø§Ø³ÙŠ
                
                // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¶Ø§Ø¹Ù Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
                valuationMultiple += (gameState.level - 1) * 2; // +2 Ù„ÙƒÙ„ Ù…Ø³ØªÙˆÙ‰
                
                // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¶Ø§Ø¹Ù Ø­Ø³Ø¨ Ø±Ø¶Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
                const csatFactor = gameState.customerSatisfaction / 100;
                valuationMultiple *= (0.5 + csatFactor * 0.5); // Ù…Ù† 0.5x Ø¥Ù„Ù‰ 1x
                
                // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¶Ø§Ø¹Ù Ø­Ø³Ø¨ Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„ (Ø§Ù„Ø³Ù…Ø¹Ø©)
                const complianceFactor = gameState.compliance / 100;
                valuationMultiple *= (0.7 + complianceFactor * 0.3); // Ù…Ù† 0.7x Ø¥Ù„Ù‰ 1x
                
                // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¶Ø§Ø¹Ù Ø­Ø³Ø¨ Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚
                const marketShareBonus = gameState.marketShare * 2; // Ø­ØªÙ‰ +20% Ù„Ù„Ù‡ÙŠÙ…Ù†Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©
                valuationMultiple *= (1 + marketShareBonus);
                
                // 5. Ù‚ÙŠÙ…Ø© Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ©
                const operationalAssets = gameState.workers * 5000 + // Ù‚ÙŠÙ…Ø© Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ù…Ø¯Ø±Ø¨Ø©
                                        gameState.rawInventory * gameState.rawUnitCost + // Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
                                        gameState.finishedInventory * gameState.unitPrice * 0.8; // Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¨Ø¶Ø§Ø¦Ø¹ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©
                
                // 6. Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…ÙŠØ²Ø§Øª ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª
                let featuresValue = 0;
                if (gameState.levelFeatures.retailStores > 0) {
                    featuresValue += gameState.levelFeatures.retailStores * 40000; // Ù‚ÙŠÙ…Ø© ÙƒÙ„ Ù…ØªØ¬Ø±
                }
                if (gameState.levelFeatures.digitalMarketing) {
                    featuresValue += 25000; // Ù‚ÙŠÙ…Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ù‚Ù…ÙŠ
                }
                if (gameState.levelFeatures.export) {
                    featuresValue += 80000; // Ù‚ÙŠÙ…Ø© Ø´Ø¨ÙƒØ© Ø§Ù„ØªØµØ¯ÙŠØ±
                }
                if (gameState.levelFeatures.premiumProducts) {
                    featuresValue += 60000; // Ù‚ÙŠÙ…Ø© Ø®Ø· Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ù…ØªÙ…ÙŠØ²
                }
                if (gameState.levelFeatures.acquisitions > 0) {
                    featuresValue += gameState.levelFeatures.acquisitions * 300000; // Ù‚ÙŠÙ…Ø© Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø³ØªØ­ÙˆØ°Ø©
                }
                if (gameState.levelFeatures.rnd) {
                    featuresValue += 150000; // Ù‚ÙŠÙ…Ø© Ù‚Ø³Ù… Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±
                }
                if (gameState.levelFeatures.venture) {
                    featuresValue += 600000; // Ù‚ÙŠÙ…Ø© ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±
                }
                if (gameState.levelFeatures.monopoly) {
                    featuresValue += 1000000; // Ù‚ÙŠÙ…Ø© Ø§Ù„Ù‡ÙŠÙ…Ù†Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆÙ‚
                }
                
                // 7. Ø­Ø³Ø§Ø¨ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©
                const operatingValue = estimatedMonthlyProfit * valuationMultiple;
                const totalAssetValue = operationalAssets + featuresValue;
                const netCash = Math.max(0, gameState.cash - calculateTotalDebt());
                
                // 8. Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù…Ø¹ ØªØ·Ø¨ÙŠÙ‚ Ø¹ÙˆØ§Ù…Ù„ Ø§Ù„Ù…Ø®Ø§Ø·Ø±
                let finalValue = operatingValue + totalAssetValue + netCash;
                
                // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ…Ø© ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙŠÙˆÙ† Ø§Ù„Ø¹Ø§Ù„ÙŠØ©
                const debtRatio = calculateTotalDebt() / Math.max(1, gameState.cash + avgMonthlyRevenue);
                if (debtRatio > 2) {
                    finalValue *= 0.7; // ØªÙ‚Ù„ÙŠÙ„ 30% Ù„Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ø¹Ø§Ù„ÙŠØ©
                } else if (debtRatio > 1) {
                    finalValue *= 0.85; // ØªÙ‚Ù„ÙŠÙ„ 15% Ù„Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©
                }
                
                // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ…Ø© ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù†Ø®ÙØ§Ø¶ Ø§Ù„Ø£Ø¯Ø§Ø¡
                if (gameState.customerSatisfaction < 50 || gameState.compliance < 50) {
                    finalValue *= 0.6; // ØªÙ‚Ù„ÙŠÙ„ 40% Ù„Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¶Ø¹ÙŠÙ
                }
                
                return Math.max(0, Math.round(finalValue));
            };

            const checkLevelUp = () => {
                const currentLevel = gameState.level;
                let shouldLevelUp = false;
                
                // Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ
                if (currentLevel === 1 && gameState.month >= 12 && gameState.cash > 100000) {
                    shouldLevelUp = true;
                } else if (currentLevel === 2 && gameState.month >= 24 && gameState.totalRevenue > 500000) {
                    shouldLevelUp = true;
                } else if (currentLevel === 3 && gameState.month >= 36 && gameState.workers >= 50) {
                    shouldLevelUp = true;
                } else if (currentLevel === 4 && gameState.month >= 48 && calculateEV() > 2000000) {
                    shouldLevelUp = true;
                }
                
                if (shouldLevelUp && currentLevel < 5) {
                    setGameState(prev => ({
                        ...prev,
                        level: prev.level + 1,
                        baseDemand: Math.round(prev.baseDemand * 1.5), // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø³ÙˆÙ‚
                        marketShare: Math.min(0.8, prev.marketShare + 0.1)
                    }));
                    setShowLevelUp(true);
                    setTimeout(() => setShowLevelUp(false), 3000);
                }
            };

            const buyLevelFeature = (featureName) => {
                const levelFeatures = LEVEL_FEATURES[gameState.level];
                if (!levelFeatures || !levelFeatures[featureName]) return;
                
                const feature = levelFeatures[featureName];
                if (gameState.cash < feature.cost) return;
                
                setGameState(prev => {
                    const newState = { ...prev };
                    newState.cash -= feature.cost;
                    
                    if (featureName === 'retailStores') {
                        newState.levelFeatures.retailStores += 1;
                    } else {
                        newState.levelFeatures[featureName] = true;
                    }
                    
                    return newState;
                });
            };

            const payLoanInstallment = (loanIndex) => {
                setGameState(prev => {
                    const loan = prev.loans[loanIndex];
                    if (!loan || prev.cash < loan.monthlyPayment || loan.paidThisMonth) {
                        return prev;
                    }

                    const newLoans = [...prev.loans];
                    const updatedLoan = {
                        ...loan,
                        totalDebt: Math.max(0, loan.totalDebt - loan.monthlyPayment),
                        remainingMonths: Math.max(0, loan.remainingMonths - 1),
                        paidThisMonth: true,
                        missedPayments: 0
                    };
                    
                    if (updatedLoan.remainingMonths <= 0 || updatedLoan.totalDebt <= 0) {
                        newLoans.splice(loanIndex, 1);
                    } else {
                        newLoans[loanIndex] = updatedLoan;
                    }
                    
                    return {
                        ...prev,
                        cash: prev.cash - loan.monthlyPayment,
                        loans: newLoans
                    };
                });
            };

            const paySalaries = () => {
                const totalSalaries = gameState.workers * GAME_CONFIG.WORKER_MONTHLY_SALARY;
                if (gameState.cash >= totalSalaries) {
                    setGameState(prev => ({
                        ...prev,
                        cash: prev.cash - totalSalaries,
                        salariesPaid: true
                    }));
                }
            };

            const payRent = () => {
                if (gameState.cash >= GAME_CONFIG.WORKSHOP_RENT) {
                    setGameState(prev => ({
                        ...prev,
                        cash: prev.cash - GAME_CONFIG.WORKSHOP_RENT,
                        rentPaid: true
                    }));
                }
            };

            const compensateCustomers = () => {
                if (gameState.cash >= GAME_CONFIG.CUSTOMER_COMPENSATION_COST) {
                    setGameState(prev => ({
                        ...prev,
                        cash: prev.cash - GAME_CONFIG.CUSTOMER_COMPENSATION_COST,
                        customerSatisfaction: Math.min(100, prev.customerSatisfaction + GAME_CONFIG.CUSTOMER_COMPENSATION_BOOST)
                    }));
                }
            };

            const investInQuality = () => {
                if (gameState.cash >= GAME_CONFIG.QUALITY_IMPROVEMENT_COST && !gameState.qualityImprovement) {
                    setGameState(prev => ({
                        ...prev,
                        cash: prev.cash - GAME_CONFIG.QUALITY_IMPROVEMENT_COST,
                        qualityImprovement: {
                            weeksLeft: GAME_CONFIG.QUALITY_IMPROVEMENT_WEEKS,
                            weeklyBonus: GAME_CONFIG.QUALITY_IMPROVEMENT_WEEKLY_BOOST
                        }
                    }));
                }
            };

            const formatCurrency = (amount) => {
                return new Intl.NumberFormat('ar-DZ', { 
                    style: 'currency', 
                    currency: 'DZD',
                    minimumFractionDigits: 0 
                }).format(amount);
            };

            const saveGame = () => {
                const saveData = {
                    companyName,
                    gameState,
                    setupComplete,
                    timestamp: new Date().toISOString()
                };
                localStorage.setItem('ceoSimulatorSave', JSON.stringify(saveData));
            };

            const loadGame = () => {
                const savedData = localStorage.getItem('ceoSimulatorSave');
                if (savedData) {
                    try {
                        const parsed = JSON.parse(savedData);
                        setCompanyName(parsed.companyName);
                        setGameState(parsed.gameState);
                        setSetupComplete(parsed.setupComplete || false);
                        setGameStarted(true);
                        return true;
                    } catch (error) {
                        console.error('Error loading saved game:', error);
                        return false;
                    }
                }
                return false;
            };

            useEffect(() => {
                const savedData = localStorage.getItem('ceoSimulatorSave');
                if (savedData) {
                    setHasSavedGame(true);
                }
            }, []);

            useEffect(() => {
                if (gameStarted && companyName && setupComplete) {
                    saveGame();
                }
            }, [gameState, gameStarted, companyName, setupComplete]);

            useEffect(() => {
                checkLevelUp();
            }, [gameState.month, gameState.cash, gameState.totalRevenue, gameState.workers]);

            const takeLoan = (loanAmount = 50000) => {
                if (gameState.loansUsed >= GAME_CONFIG.MAX_LOANS) return;
                
                const loanDuration = calculateLoanDuration(loanAmount);
                const totalDebt = loanAmount * (1 + GAME_CONFIG.LOAN_INTEREST_RATE);
                const monthlyPayment = Math.ceil(totalDebt / loanDuration);
                
                const newLoan = {
                    amount: loanAmount,
                    totalDebt: totalDebt,
                    monthlyPayment: monthlyPayment,
                    remainingMonths: loanDuration,
                    missedPayments: 0,
                    interestRate: GAME_CONFIG.LOAN_INTEREST_RATE,
                    paidThisMonth: false
                };
                
                setGameState(prev => ({
                    ...prev,
                    cash: prev.cash + loanAmount,
                    loans: [...prev.loans, newLoan],
                    loansUsed: prev.loansUsed + 1
                }));
            };

            const hireWorkers = () => {
                if (inputs.hireWorkers <= 0) return;
                if (gameState.workers + inputs.hireWorkers > getMaxWorkers()) {
                    alert(`Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø¹Ù…Ø§Ù„ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${gameState.level} Ù‡Ùˆ ${getMaxWorkers()} Ø¹Ø§Ù…Ù„`);
                    return;
                }
                
                const totalCost = inputs.hireWorkers * GAME_CONFIG.RECRUITMENT_COST;
                if (gameState.cash < totalCost) return;
                
                setGameState(prev => ({
                    ...prev,
                    workers: prev.workers + inputs.hireWorkers,
                    capacity: (prev.workers + inputs.hireWorkers) * GAME_CONFIG.PRODUCTION_PER_WORKER,
                    cash: prev.cash - totalCost
                }));
                
                setInputs(prev => ({...prev, hireWorkers: 0}));
            };

            const executeDay = () => {
                setGameState(prev => {
                    const newState = { ...prev };
                    
                    switch (prev.day) {
                        case 0: // Sunday - Procurement
                            if (inputs.procurement > 0 && prev.cash >= inputs.procurement * prev.rawUnitCost) {
                                newState.cash -= inputs.procurement * prev.rawUnitCost;
                                newState.rawInventory += inputs.procurement;
                                newState.procurementAmount = inputs.procurement;
                            }
                            break;
                            
                        case 1: // Monday - Production Planning
                            newState.plannedProduction = Math.min(inputs.production, prev.capacity, prev.rawInventory);
                            break;
                            
                        case 2: // Tuesday - Production Execution
                            const actualProduction = newState.plannedProduction;
                            if (actualProduction > 0) {
                                newState.rawInventory -= actualProduction;
                                newState.finishedInventory += actualProduction;
                                const productionCost = GAME_CONFIG.FIXED_WEEKLY_COST + (actualProduction * prev.variableCost);
                                newState.cash -= productionCost;
                            }
                            break;
                            
                        case 3: // Wednesday - Pricing & Marketing
                            newState.unitPrice = inputs.price;
                            if (inputs.marketing > 0 && prev.cash >= inputs.marketing) {
                                newState.cash -= inputs.marketing;
                                newState.marketingSpend = inputs.marketing;
                            }
                            break;
                            
                        case 4: // Thursday - Sales
                            const marketMultiplier = getMarketMultiplier();
                            let adjustedDemand = Math.round(prev.baseDemand * marketMultiplier);
                            
                            // ØªØ·Ø¨ÙŠÙ‚ ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
                            if (prev.levelFeatures.digitalMarketing) {
                                adjustedDemand = Math.round(adjustedDemand * 1.3);
                            }
                            if (prev.levelFeatures.export) {
                                adjustedDemand = Math.round(adjustedDemand * 1.5);
                            }
                            
                            const baseDemandFromPrice = Math.round(
                                adjustedDemand * 
                                Math.pow(GAME_CONFIG.REFERENCE_PRICE / newState.unitPrice, GAME_CONFIG.PRICE_ELASTICITY)
                            );
                            
                            let marketingEfficiency = GAME_CONFIG.MARKETING_COST_PER_CUSTOMER;
                            if (prev.levelFeatures.digitalMarketing) {
                                marketingEfficiency = Math.round(marketingEfficiency * 0.7); // ØªØ³ÙˆÙŠÙ‚ Ø£ÙƒØ«Ø± ÙƒÙØ§Ø¡Ø©
                            }
                            
                            const marketingCustomers = Math.floor(newState.marketingSpend / marketingEfficiency);
                            const demand = baseDemandFromPrice + marketingCustomers;
                            
                            const unitsToSell = Math.min(demand, prev.finishedInventory);
                            let revenue = 0;
                            let fines = 0;
                            let notes = '';
                            
                            let finalPrice = newState.unitPrice;
                            if (prev.levelFeatures.premiumProducts) {
                                finalPrice = Math.round(finalPrice * 1.4); // Ù…Ù†ØªØ¬Ø§Øª Ù…ØªÙ…ÙŠØ²Ø© Ø¨Ø³Ø¹Ø± Ø£Ø¹Ù„Ù‰
                            }
                            
                            if (gameState.salesChannel === 'legal') {
                                revenue = unitsToSell * finalPrice;
                                
                                // Ø¥Ø¶Ø§ÙØ© Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ù…ØªØ§Ø¬Ø± Ø§Ù„ØªØ¬Ø²Ø¦Ø©
                                if (prev.levelFeatures.retailStores > 0) {
                                    const retailRevenue = prev.levelFeatures.retailStores * 8000;
                                    revenue += retailRevenue;
                                    notes = `Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ: ${unitsToSell} ÙˆØ­Ø¯Ø© + ${prev.levelFeatures.retailStores} Ù…ØªØ¬Ø±`;
                                } else {
                                    notes = `Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ: ØªÙ… Ø¨ÙŠØ¹ ${unitsToSell} ÙˆØ­Ø¯Ø©`;
                                }
                                
                                newState.cash += revenue;
                            } else {
                                const blackMarketPrice = finalPrice * (1 + GAME_CONFIG.BLACK_MARKET_PREMIUM_MIN + 
                                    Math.random() * (GAME_CONFIG.BLACK_MARKET_PREMIUM_MAX - GAME_CONFIG.BLACK_MARKET_PREMIUM_MIN));
                                
                                const outcome = Math.random();
                                if (outcome < GAME_CONFIG.BLACK_MARKET_SUCCESS) {
                                    revenue = unitsToSell * blackMarketPrice;
                                    newState.cash += revenue;
                                    notes = `Ù†Ø¬Ø­ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡: ${unitsToSell} ÙˆØ­Ø¯Ø© Ø¨Ø³Ø¹Ø± Ù…Ù…ÙŠØ²`;
                                } else if (outcome < GAME_CONFIG.BLACK_MARKET_SUCCESS + GAME_CONFIG.BLACK_MARKET_FINE) {
                                    fines = GAME_CONFIG.FINE_AMOUNT * (gameState.level * 0.5); // ØºØ±Ø§Ù…Ø§Øª Ø£ÙƒØ¨Ø± ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø¹Ù„ÙŠØ§
                                    newState.cash -= fines;
                                    newState.compliance -= GAME_CONFIG.COMPLIANCE_DROP_FINE;
                                    notes = `ØºØ±Ø§Ù…Ø© Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡: ${formatCurrency(fines)} Ø¹Ù‚ÙˆØ¨Ø©`;
                                } else {
                                    notes = `ÙØ´Ù„ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡: Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø¯ÙØ¹`;
                                }
                                
                                newState.compliance = Math.max(0, newState.compliance - GAME_CONFIG.COMPLIANCE_DROP_BLACK_MARKET);
                            }
                            
                            newState.finishedInventory -= unitsToSell;
                            newState.totalRevenue += revenue;
                            
                            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø³Ù„Ø¨ÙŠ Ù…Ù† ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±
                            if (prev.levelFeatures.venture) {
                                const passiveIncome = 50000;
                                newState.cash += passiveIncome;
                                revenue += passiveIncome;
                                notes += ` + Ø¯Ø®Ù„ Ø³Ù„Ø¨ÙŠ: ${formatCurrency(passiveIncome)}`;
                            }
                            
                            if (unitsToSell < demand) {
                                newState.customerSatisfaction = Math.max(0, newState.customerSatisfaction - GAME_CONFIG.CSAT_DROP_STOCKOUT);
                            }
                            if (newState.unitPrice > GAME_CONFIG.REFERENCE_PRICE * 1.4) {
                                newState.customerSatisfaction = Math.max(0, newState.customerSatisfaction - GAME_CONFIG.CSAT_DROP_OVERPRICING);
                            }
                            if (unitsToSell > 0) {
                                newState.customerSatisfaction = Math.min(100, newState.customerSatisfaction + GAME_CONFIG.CSAT_RECOVERY);
                            }
                            
                            newState.weekResults.push({
                                week: prev.week,
                                unitsSold: unitsToSell,
                                revenue: revenue,
                                fines: fines,
                                notes: notes
                            });
                            
                            break;
                    }
                    
                    return newState;
                });
                
                setInputs({
                    procurement: 0,
                    production: 0,
                    price: gameState.unitPrice,
                    marketing: 0
                });
            };

            const startGame = () => {
                if (companyName.trim()) {
                    setGameStarted(true);
                }
            };

            const completeSetup = () => {
                if (setupConfig.loanAmount < GAME_CONFIG.STARTUP_COSTS) {
                    alert('Ù…Ø¨Ù„Øº Ø§Ù„Ù‚Ø±Ø¶ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ ' + formatCurrency(GAME_CONFIG.STARTUP_COSTS) + ' Ù„ØªØºØ·ÙŠØ© ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„ØªØ£Ø³ÙŠØ³');
                    return;
                }
                
                if (setupConfig.initialWorkers < 1) {
                    alert('ÙŠØ¬Ø¨ ØªÙˆØ¸ÙŠÙ Ø¹Ø§Ù…Ù„ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                    return;
                }

                const loanDuration = calculateLoanDuration(setupConfig.loanAmount);
                const totalDebt = setupConfig.loanAmount * (1 + GAME_CONFIG.LOAN_INTEREST_RATE);
                const monthlyPayment = Math.ceil(totalDebt / loanDuration);
                
                const initialLoan = {
                    amount: setupConfig.loanAmount,
                    totalDebt: totalDebt,
                    monthlyPayment: monthlyPayment,
                    remainingMonths: loanDuration,
                    missedPayments: 0,
                    interestRate: GAME_CONFIG.LOAN_INTEREST_RATE,
                    paidThisMonth: false
                };

                setGameState(prev => ({
                    ...prev,
                    cash: setupConfig.loanAmount - GAME_CONFIG.STARTUP_COSTS,
                    loans: [initialLoan],
                    loansUsed: 1,
                    workers: setupConfig.initialWorkers,
                    capacity: setupConfig.initialWorkers * GAME_CONFIG.PRODUCTION_PER_WORKER
                }));
                
                setSetupComplete(true);
            };

            const deleteSavedGame = () => {
                localStorage.removeItem('ceoSimulatorSave');
                setHasSavedGame(false);
            };

            const nextDay = () => {
                setGameState(prev => {
                    let newState = { ...prev };
                    
                    if (prev.day < 4) {
                        newState.day = prev.day + 1;
                    } else {
                        newState.day = 0;
                        newState.week = prev.week + 1;
                        newState.currentEvent = null;
                        
                        if (newState.qualityImprovement && newState.qualityImprovement.weeksLeft > 0) {
                            newState.customerSatisfaction = Math.min(100, newState.customerSatisfaction + newState.qualityImprovement.weeklyBonus);
                            newState.qualityImprovement.weeksLeft -= 1;
                            
                            if (newState.qualityImprovement.weeksLeft <= 0) {
                                newState.qualityImprovement = null;
                            }
                        }
                        
                        if (newState.customerSatisfaction < 100) {
                            newState.customerSatisfaction = Math.min(100, newState.customerSatisfaction + GAME_CONFIG.NATURAL_RECOVERY_RATE);
                        }
                        
                        if (newState.compliance < 100 && prev.salesChannel === 'legal') {
                            newState.compliance = Math.min(100, newState.compliance + 3);
                        }
                        
                        // Ø£Ø­Ø¯Ø§Ø« Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù…ØªØ¯Ø±Ø¬Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
                        if (newState.month >= 2 && Math.random() < 0.4) { // 40% Ø§Ø­ØªÙ…Ø§Ù„ Ø­Ø¯ÙˆØ« Ø­Ø¯Ø« ÙƒÙ„ Ø´Ù‡Ø±
                            const levelEvents = RANDOM_EVENTS[newState.level] || RANDOM_EVENTS[1];
                            const event = levelEvents[Math.floor(Math.random() * levelEvents.length)];
                            newState.currentEvent = event;
                            
                            if (event.effect.rawUnitCost) {
                                newState.rawUnitCost = Math.round(prev.rawUnitCost * event.effect.rawUnitCost);
                            }
                            if (event.effect.baseDemand) {
                                newState.baseDemand = Math.round(prev.baseDemand * event.effect.baseDemand);
                            }
                            if (event.effect.capacity) {
                                newState.workers = Math.max(1, Math.round(prev.workers * event.effect.capacity));
                                newState.capacity = newState.workers * GAME_CONFIG.PRODUCTION_PER_WORKER;
                            }
                            if (event.effect.cash) {
                                newState.cash = Math.max(0, prev.cash + event.effect.cash);
                            }
                            if (event.effect.compliance) {
                                newState.compliance = Math.max(0, Math.min(100, prev.compliance + event.effect.compliance));
                            }
                            if (event.effect.csat) {
                                newState.customerSatisfaction = Math.max(0, Math.min(100, prev.customerSatisfaction + event.effect.csat));
                            }
                            if (event.effect.variableCost) {
                                newState.variableCost = Math.round(prev.variableCost * event.effect.variableCost);
                            }
                        }
                        
                        if (prev.week >= 4) {
                            newState.month = prev.month + 1;
                            newState.week = 1;
                            
                            // ØªØ­Ø¯ÙŠØ« Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø´Ù‡Ø±ÙŠ
                            const monthlyRevenue = gameState.month > 0 ? gameState.totalRevenue / gameState.month : 0;
                            const marketPerformance = monthlyRevenue / Math.max(1, 50000 * getMarketMultiplier()); // Ù…Ø¹ÙŠØ§Ø± Ø§Ù„Ø£Ø¯Ø§Ø¡
                            
                            if (marketPerformance > 2) {
                                newState.marketShare = Math.min(0.8, prev.marketShare + 0.05); // Ù†Ù…Ùˆ Ø³Ø±ÙŠØ¹
                            } else if (marketPerformance > 1.5) {
                                newState.marketShare = Math.min(0.8, prev.marketShare + 0.03); // Ù†Ù…Ùˆ Ù…ØªÙˆØ³Ø·
                            } else if (marketPerformance > 1) {
                                newState.marketShare = Math.min(0.8, prev.marketShare + 0.01); // Ù†Ù…Ùˆ Ø¨Ø·ÙŠØ¡
                            } else if (marketPerformance < 0.5) {
                                newState.marketShare = Math.max(0.05, prev.marketShare - 0.02); // ØªØ±Ø§Ø¬Ø¹
                            }
                            
                            newState.salariesPaid = false;
                            newState.rentPaid = false;
                            
                            if (!prev.salariesPaid && prev.workers > 0) {
                                newState.cash = Math.max(0, newState.cash - GAME_CONFIG.LABOR_VIOLATION_FINE);
                                newState.compliance = Math.max(0, newState.compliance - 25);
                                newState.customerSatisfaction = Math.max(0, newState.customerSatisfaction - 15);
                                newState.workers = 0;
                                newState.capacity = 0;
                            }
                            
                            newState.loans = prev.loans.map(loan => {
                                const updatedLoan = { ...loan };
                                
                                if (!loan.paidThisMonth) {
                                    updatedLoan.missedPayments += 1;
                                    
                                    const penaltyRate = GAME_CONFIG.LOAN_PENALTY_RATE * updatedLoan.missedPayments;
                                    updatedLoan.totalDebt = Math.ceil(updatedLoan.totalDebt * (1 + penaltyRate));
                                    updatedLoan.monthlyPayment = Math.ceil(updatedLoan.totalDebt / Math.max(1, updatedLoan.remainingMonths));
                                }
                                
                                updatedLoan.paidThisMonth = false;
                                
                                return updatedLoan;
                            });
                            
                            newState.weekResults = [];
                            newState.marketingSpend = 0;
                            
                            // Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¹Ø¯ 60 Ø´Ù‡Ø± Ø£Ùˆ ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ù‡ÙŠÙ…Ù†Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©
                            if (newState.month > 60 || (newState.level === 5 && newState.marketShare > 0.7)) {
                                const totalDebt = newState.loans.reduce((total, loan) => total + loan.totalDebt, 0);
                                if (totalDebt > 0) {
                                    if (newState.cash >= totalDebt) {
                                        newState.cash -= totalDebt;
                                        newState.loans = [];
                                        newState.gameEnded = true;
                                        newState.endReason = 'success_debt_paid';
                                    } else {
                                        newState.gameEnded = true;
                                        newState.endReason = 'bankruptcy';
                                    }
                                } else {
                                    newState.gameEnded = true;
                                    newState.endReason = newState.level === 5 ? 'empire_complete' : 'success';
                                }
                            }
                        }
                    }
                    
                    return newState;
                });
            };

            if (gameState.gameEnded) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-gray-900 to-black flex items-center justify-center p-4">
                        <div className="bg-white rounded-3xl shadow-2xl p-12 max-w-2xl w-full text-center">
                            {gameState.endReason === 'empire_complete' && (
                                <div>
                                    <div className="text-8xl mb-6">ğŸ‘‘</div>
                                    <h1 className="text-5xl font-bold text-yellow-600 mb-4">Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ù…ÙƒØªÙ…Ù„Ø©!</h1>
                                    <h2 className="text-3xl font-semibold text-gray-800 mb-6">Ù‡ÙŠÙ…Ù†Øª Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆÙ‚ ÙˆØ¨Ù†ÙŠØª Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© ØªØ¬Ø§Ø±ÙŠØ©!</h2>
                                    <div className="bg-yellow-50 rounded-2xl p-6 mb-6">
                                        <p className="text-lg text-yellow-800 mb-4">
                                            ÙˆØµÙ„Øª Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø¹Ù„Ù‰ ÙˆØ­Ù‚Ù‚Øª Ø§Ù„Ù‡ÙŠÙ…Ù†Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆÙ‚!
                                        </p>
                                        <div className="grid grid-cols-2 gap-4 text-sm">
                                            <div className="bg-white rounded-lg p-3">
                                                <p className="font-semibold text-gray-800">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</p>
                                                <p className="text-yellow-600 font-bold">{getCurrentLevel().name} {getCurrentLevel().icon}</p>
                                            </div>
                                            <div className="bg-white rounded-lg p-3">
                                                <p className="font-semibold text-gray-800">Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚</p>
                                                <p className="text-yellow-600 font-bold">{(gameState.marketShare * 100).toFixed(1)}%</p>
                                            </div>
                                            <div className="bg-white rounded-lg p-3">
                                                <p className="font-semibold text-gray-800">Ø§Ù„Ù†Ù‚Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</p>
                                                <p className="text-yellow-600 font-bold ltr">{formatCurrency(gameState.cash)}</p>
                                            </div>
                                            <div className="bg-white rounded-lg p-3">
                                                <p className="font-semibold text-gray-800">Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©</p>
                                                <p className="text-yellow-600 font-bold ltr">{formatCurrency(calculateEV())}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                            
                            {gameState.endReason === 'success' && (
                                <div>
                                    <div className="text-8xl mb-6">ğŸ‰</div>
                                    <h1 className="text-5xl font-bold text-green-600 mb-4">ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!</h1>
                                    <h2 className="text-3xl font-semibold text-gray-800 mb-6">Ù†Ø¬Ø­Øª ÙÙŠ Ø¥Ø¯Ø§Ø±Ø© Ø´Ø±ÙƒØªÙƒ Ø¨Ø§Ù…ØªÙŠØ§Ø²!</h2>
                                    <div className="bg-green-50 rounded-2xl p-6 mb-6">
                                        <p className="text-lg text-green-800 mb-4">
                                            Ø£ÙƒÙ…Ù„Øª Ø±Ø­Ù„ØªÙƒ ÙƒØ±Ø¦ÙŠØ³ ØªÙ†ÙÙŠØ°ÙŠ ÙˆÙˆØµÙ„Øª Ù„Ù„Ù…Ø³ØªÙˆÙ‰ {gameState.level}!
                                        </p>
                                        <div className="grid grid-cols-2 gap-4 text-sm">
                                            <div className="bg-white rounded-lg p-3">
                                                <p className="font-semibold text-gray-800">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ù‚Ù‚</p>
                                                <p className="text-green-600 font-bold">{getCurrentLevel().name} {getCurrentLevel().icon}</p>
                                            </div>
                                            <div className="bg-white rounded-lg p-3">
                                                <p className="font-semibold text-gray-800">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</p>
                                                <p className="text-green-600 font-bold ltr">{formatCurrency(gameState.totalRevenue)}</p>
                                            </div>
                                            <div className="bg-white rounded-lg p-3">
                                                <p className="font-semibold text-gray-800">Ø§Ù„Ù†Ù‚Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</p>
                                                <p className="text-green-600 font-bold ltr">{formatCurrency(gameState.cash)}</p>
                                            </div>
                                            <div className="bg-white rounded-lg p-3">
                                                <p className="font-semibold text-gray-800">Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¤Ø³Ø³Ø©</p>
                                                <p className="text-green-600 font-bold ltr">{formatCurrency(calculateEV())}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                            
                            {gameState.endReason === 'success_debt_paid' && (
                                <div>
                                    <div className="text-8xl mb-6">ğŸ’°</div>
                                    <h1 className="text-5xl font-bold text-blue-600 mb-4">Ù…Ø¨Ø±ÙˆÙƒ!</h1>
                                    <h2 className="text-3xl font-semibold text-gray-800 mb-6">Ø³Ø¯Ø¯Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯ÙŠÙˆÙ† Ø¨Ù†Ø¬Ø§Ø­!</h2>
                                    <div className="bg-blue-50 rounded-2xl p-6 mb-6">
                                        <p className="text-lg text-blue-800 mb-4">
                                            ÙˆØµÙ„Øª Ù„Ù„Ù…Ø³ØªÙˆÙ‰ {gameState.level} ÙˆØ³Ø¯Ø¯Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¯ÙŠÙˆÙ†!
                                        </p>
                                        <div className="grid grid-cols-2 gap-4 text-sm">
                                            <div className="bg-white rounded-lg p-3">
                                                <p className="font-semibold text-gray-800">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ù‚Ù‚</p>
                                                <p className="text-blue-600 font-bold">{getCurrentLevel().name} {getCurrentLevel().icon}</p>
                                            </div>
                                            <div className="bg-white rounded-lg p-3">
                                                <p className="font-semibold text-gray-800">Ø§Ù„Ù†Ù‚Ø¯ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</p>
                                                <p className="text-blue-600 font-bold ltr">{formatCurrency(gameState.cash)}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                            
                            {gameState.endReason === 'bankruptcy' && (
                                <div>
                                    <div className="text-8xl mb-6">â›“ï¸</div>
                                    <h1 className="text-5xl font-bold text-red-600 mb-4">Ø¥ÙÙ„Ø§Ø³!</h1>
                                    <h2 className="text-3xl font-semibold text-gray-800 mb-6">ØªÙ… Ø­Ø¬Ø² Ø§Ù„Ø´Ø±ÙƒØ©</h2>
                                    <div className="bg-red-50 rounded-2xl p-6 mb-6">
                                        <p className="text-lg text-red-800 mb-4">
                                            ÙˆØµÙ„Øª Ù„Ù„Ù…Ø³ØªÙˆÙ‰ {gameState.level} Ù„ÙƒÙ† Ù„Ù… ØªØªÙ…ÙƒÙ† Ù…Ù† Ø³Ø¯Ø§Ø¯ Ø§Ù„Ø¯ÙŠÙˆÙ†
                                        </p>
                                        <div className="grid grid-cols-2 gap-4 text-sm">
                                            <div className="bg-white rounded-lg p-3">
                                                <p className="font-semibold text-gray-800">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ù‚Ù‚</p>
                                                <p className="text-red-600 font-bold">{getCurrentLevel().name} {getCurrentLevel().icon}</p>
                                            </div>
                                            <div className="bg-white rounded-lg p-3">
                                                <p className="font-semibold text-gray-800">Ø§Ù„Ø¹Ø¬Ø²</p>
                                                <p className="text-red-600 font-bold ltr">{formatCurrency(calculateTotalDebt() - gameState.cash)}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                            
                            <button
                                onClick={() => {
                                    deleteSavedGame();
                                    window.location.reload();
                                }}
                                className="bg-indigo-600 hover:bg-indigo-700 text-white font-bold text-xl py-4 px-12 rounded-2xl transition-all duration-300 transform hover:scale-105"
                            >
                                Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                            </button>
                        </div>
                    </div>
                );
            }

            if (!gameStarted) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4">
                        <div className="bg-white rounded-3xl shadow-2xl p-12 max-w-4xl w-full text-center">
                            <div className="mb-8">
                                <h1 className="text-5xl font-bold text-gray-800 mb-4">Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ</h1>
                                <h2 className="text-3xl font-semibold text-indigo-600 mb-6">Ø±Ø­Ù„Ø© Ø§Ù„Ù†Ù…Ùˆ - 5 Ù…Ø³ØªÙˆÙŠØ§Øª</h2>
                                <p className="text-lg text-gray-600 mb-8">
                                    Ø§Ø¨Ø¯Ø£ ÙƒØ´Ø±ÙƒØ© Ù†Ø§Ø´Ø¦Ø© ÙˆØ§ØµØ¹Ø¯ Ø¹Ø¨Ø± 5 Ù…Ø³ØªÙˆÙŠØ§Øª Ù…Ø«ÙŠØ±Ø© Ù„ØªØµÙ„ Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© ØªØ¬Ø§Ø±ÙŠØ©!
                                    ÙƒÙ„ Ù…Ø³ØªÙˆÙ‰ ÙŠÙØªØ­ Ù…ÙŠØ²Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© ÙˆØªØ­Ø¯ÙŠØ§Øª Ø£ÙƒØ¨Ø±.
                                </p>
                            </div>

                            {/* Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª */}
                            <div className="grid grid-cols-1 md:grid-cols-5 gap-4 mb-8">
                                {Object.entries(LEVELS).map(([level, data]) => (
                                    <div key={level} className={`${data.cardColor} rounded-2xl p-4 border-2 transition-all duration-300 hover:scale-105`}>
                                        <div className="text-4xl mb-2">{data.icon}</div>
                                        <h3 className="font-bold text-sm mb-2">{data.name}</h3>
                                        <p className="text-xs text-gray-600 mb-2">{data.description}</p>
                                        <div className="text-xs space-y-1">
                                            <p className="font-semibold">Ø§Ù„Ø³ÙˆÙ‚: Ã—{data.marketMultiplier}</p>
                                            <p className="font-semibold">Ø§Ù„Ø¹Ù…Ø§Ù„: {data.maxWorkers}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>
                            
                            <div className="mb-8">
                                <label className="block text-xl font-semibold text-gray-700 mb-4">
                                    Ù…Ø§ Ø§Ø³Ù… Ø´Ø±ÙƒØªÙƒØŸ
                                </label>
                                <input
                                    type="text"
                                    value={companyName}
                                    onChange={(e) => setCompanyName(e.target.value)}
                                    placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø´Ø±ÙƒØªÙƒ..."
                                    className="w-full px-6 py-4 text-lg border-2 border-gray-300 rounded-2xl focus:ring-4 focus:ring-indigo-500 focus:border-indigo-500 text-center"
                                    onKeyPress={(e) => e.key === 'Enter' && startGame()}
                                />
                            </div>
                            
                            <div className="space-y-4">
                                {hasSavedGame && (
                                    <div className="bg-green-50 border-2 border-green-300 rounded-2xl p-6 mb-6">
                                        <div className="flex items-center justify-center mb-3">
                                            <span className="text-3xl mr-3">ğŸ’¾</span>
                                            <h3 className="text-xl font-bold text-green-800">Ù„Ø¹Ø¨Ø© Ù…Ø­ÙÙˆØ¸Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©!</h3>
                                        </div>
                                        <div className="flex gap-4 justify-center">
                                            <button
                                                onClick={loadGame}
                                                className="bg-green-600 hover:bg-green-700 text-white font-bold text-lg py-3 px-8 rounded-2xl transition-all duration-300 transform hover:scale-105"
                                            >
                                                Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø±Ø­Ù„Ø©
                                            </button>
                                            <button
                                                onClick={deleteSavedGame}
                                                className="bg-red-600 hover:bg-red-700 text-white font-bold text-lg py-3 px-8 rounded-2xl transition-all duration-300 transform hover:scale-105"
                                            >
                                                Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø©
                                            </button>
                                        </div>
                                    </div>
                                )}

                                <button
                                    onClick={startGame}
                                    disabled={!companyName.trim()}
                                    className="bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white font-bold text-xl py-4 px-12 rounded-2xl transition-all duration-300 transform hover:scale-105 disabled:scale-100"
                                >
                                    ğŸš€ Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„Ø© Ø§Ù„Ù†Ù…Ùˆ
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            if (gameStarted && !setupComplete) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-green-50 to-blue-100 flex items-center justify-center p-4">
                        <div className="bg-white rounded-3xl shadow-2xl p-12 max-w-3xl w-full">
                            <div className="text-center mb-8">
                                <h1 className="text-4xl font-bold text-gray-800 mb-2">Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø´Ø±ÙˆØ¹ {companyName}</h1>
                                <div className="flex items-center justify-center mb-4">
                                    <span className="text-4xl mr-3">{getCurrentLevel().icon}</span>
                                    <div>
                                        <p className="text-lg font-semibold text-indigo-600">{getCurrentLevel().name}</p>
                                        <p className="text-sm text-gray-600">{getCurrentLevel().description}</p>
                                    </div>
                                </div>
                            </div>

                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div className="bg-blue-50 rounded-2xl p-6">
                                    <h2 className="text-2xl font-bold text-blue-800 mb-4">ğŸ’° Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø±Ø¶ Ø§Ù„Ø£ÙˆÙ„ÙŠ</h2>
                                    
                                    <div className="mb-6">
                                        <label className="block text-lg font-semibold text-blue-700 mb-3">
                                            Ù…Ø¨Ù„Øº Ø§Ù„Ù‚Ø±Ø¶ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
                                        </label>
                                        <input
                                            type="number"
                                            min={GAME_CONFIG.STARTUP_COSTS}
                                            step="5000"
                                            value={setupConfig.loanAmount}
                                            onChange={(e) => setSetupConfig(prev => ({...prev, loanAmount: parseInt(e.target.value) || GAME_CONFIG.STARTUP_COSTS}))}
                                            className="w-full px-4 py-3 text-lg border-2 border-blue-300 rounded-xl focus:ring-4 focus:ring-blue-500 focus:border-blue-500 text-center"
                                        />
                                    </div>

                                    <div className="bg-white rounded-xl p-4 mb-4">
                                        <h3 className="font-semibold text-blue-800 mb-3">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù‚Ø±Ø¶:</h3>
                                        <div className="space-y-2 text-sm">
                                            <div className="flex justify-between">
                                                <span className="text-blue-700">Ø§Ù„Ù‚Ø³Ø· Ø§Ù„Ø´Ù‡Ø±ÙŠ:</span>
                                                <span className="font-bold text-red-600 ltr">{formatCurrency(Math.ceil((setupConfig.loanAmount * (1 + GAME_CONFIG.LOAN_INTEREST_RATE)) / calculateLoanDuration(setupConfig.loanAmount)))}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-green-50 rounded-2xl p-6">
                                    <h2 className="text-2xl font-bold text-green-800 mb-4">ğŸ‘· Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø©</h2>
                                    
                                    <div className="mb-6">
                                        <label className="block text-lg font-semibold text-green-700 mb-3">
                                            Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ø§Ù„ Ø§Ù„Ø£ÙˆÙ„ÙŠ (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: {getMaxWorkers()})
                                        </label>
                                        <input
                                            type="number"
                                            min="1"
                                            max={getMaxWorkers()}
                                            value={setupConfig.initialWorkers}
                                            onChange={(e) => setSetupConfig(prev => ({...prev, initialWorkers: parseInt(e.target.value) || 1}))}
                                            className="w-full px-4 py-3 text-lg border-2 border-green-300 rounded-xl focus:ring-4 focus:ring-green-500 focus:border-green-500 text-center"
                                        />
                                    </div>

                                    <div className="bg-white rounded-xl p-4 mb-4">
                                        <h3 className="font-semibold text-green-800 mb-3">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø§Ù…Ù„Ø©:</h3>
                                        <div className="space-y-2 text-sm">
                                            <div className="flex justify-between">
                                                <span className="text-green-700">Ø§Ù„Ù‚Ø¯Ø±Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©:</span>
                                                <span className="font-bold text-green-600">{setupConfig.initialWorkers * GAME_CONFIG.PRODUCTION_PER_WORKER} ÙˆØ­Ø¯Ø©/Ø£Ø³Ø¨ÙˆØ¹</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className="text-green-700">Ø§Ù„Ø±ÙˆØ§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©:</span>
                                                <span className="font-bold text-orange-600 ltr">{formatCurrency(setupConfig.initialWorkers * GAME_CONFIG.WORKER_MONTHLY_SALARY)}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div className="mt-8 text-center">
                                <button
                                    onClick={completeSetup}
                                    disabled={setupConfig.loanAmount < GAME_CONFIG.STARTUP_COSTS || setupConfig.initialWorkers < 1}
                                    className="bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white font-bold text-xl py-4 px-12 rounded-2xl transition-all duration-300 transform hover:scale-105 disabled:scale-100"
                                >
                                    ğŸš€ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø±Ø­Ù„Ø©
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className={`min-h-screen bg-gradient-to-br ${getCurrentLevel().bgColor} p-4`}>
                    {/* Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ */}
                    {showLevelUp && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                            <div className="bg-white rounded-3xl p-12 text-center level-up-animation shadow-2xl">
                                <div className="text-8xl mb-4">{getCurrentLevel().icon}</div>
                                <h1 className="text-4xl font-bold text-purple-600 mb-4">Ù…Ø³ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯!</h1>
                                <h2 className="text-2xl font-semibold text-gray-800 mb-4">{getCurrentLevel().name}</h2>
                                <p className="text-lg text-gray-600 mb-6">{getCurrentLevel().description}</p>
                                <div className="bg-purple-50 rounded-2xl p-4">
                                    <h3 className="font-bold text-purple-800 mb-2">Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:</h3>
                                    <ul className="text-sm text-purple-700 space-y-1">
                                        {getCurrentLevel().unlocks.map((unlock, index) => (
                                            <li key={index}>âœ¨ {unlock}</li>
                                        ))}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="max-w-7xl mx-auto">
                        <div className="text-center mb-6">
                            <div className="flex items-center justify-center mb-4">
                                <div className="level-badge text-white px-6 py-3 rounded-2xl mr-4">
                                    <span className="text-2xl mr-2">{getCurrentLevel().icon}</span>
                                    <span className="font-bold">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ {gameState.level}: {getCurrentLevel().name}</span>
                                </div>
                                <div className="bg-white rounded-2xl px-4 py-2 shadow-lg">
                                    <p className="text-sm text-gray-600">Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚: {(gameState.marketShare * 100).toFixed(1)}%</p>
                                </div>
                            </div>
                            <h1 className="text-4xl font-bold text-gray-800 mb-2">{companyName}</h1>
                            <p className="text-lg text-gray-600">Ø§Ù„Ø´Ù‡Ø± {gameState.month} â€¢ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ {gameState.week} â€¢ {DAYS[gameState.day]}</p>
                            <p className="text-sm text-gray-500 mt-1">{DAY_ACTIVITIES[gameState.day]}</p>
                        </div>

                        {/* Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« ÙˆØ§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */}
                        <div className="mb-6 space-y-4">
                            {/* Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù‡Ù…Ø© */}
                            {!gameState.salariesPaid && gameState.workers > 0 && (
                                <div className="bg-red-50 border-2 border-red-400 rounded-2xl p-4 shadow-lg notification-enter">
                                    <div className="flex items-center justify-center mb-2">
                                        <span className="text-2xl mr-2">âš ï¸</span>
                                        <h3 className="text-lg font-bold text-red-800">ØªØ­Ø°ÙŠØ±: Ø±ÙˆØ§ØªØ¨ ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©!</h3>
                                    </div>
                                    <p className="text-sm text-red-700 text-center">
                                        ÙŠØ¬Ø¨ Ø¯ÙØ¹ Ø±ÙˆØ§ØªØ¨ Ø§Ù„Ø¹Ù…Ø§Ù„ ({formatCurrency(gameState.workers * GAME_CONFIG.WORKER_MONTHLY_SALARY)}) Ù‚Ø¨Ù„ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø´Ù‡Ø± Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØºØ±Ø§Ù…Ø§Øª
                                    </p>
                                </div>
                            )}

                            {!gameState.rentPaid && (
                                <div className="bg-orange-50 border-2 border-orange-400 rounded-2xl p-4 shadow-lg notification-enter">
                                    <div className="flex items-center justify-center mb-2">
                                        <span className="text-2xl mr-2">ğŸ­</span>
                                        <h3 className="text-lg font-bold text-orange-800">ØªØ°ÙƒÙŠØ±: Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„ÙˆØ±Ø´Ø©</h3>
                                    </div>
                                    <p className="text-sm text-orange-700 text-center">
                                        Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„ÙˆØ±Ø´Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠ ({formatCurrency(GAME_CONFIG.WORKSHOP_RENT)}) Ù„Ù… ÙŠØªÙ… Ø¯ÙØ¹Ù‡ Ø¨Ø¹Ø¯
                                    </p>
                                </div>
                            )}

                            {gameState.loans.some(loan => !loan.paidThisMonth) && (
                                <div className="bg-red-50 border-2 border-red-500 rounded-2xl p-4 shadow-lg notification-enter">
                                    <div className="flex items-center justify-center mb-2">
                                        <span className="text-2xl mr-2">ğŸ’³</span>
                                        <h3 className="text-lg font-bold text-red-800">Ø£Ù‚Ø³Ø§Ø· Ù‚Ø±ÙˆØ¶ Ù…ØªØ£Ø®Ø±Ø©!</h3>
                                    </div>
                                    <p className="text-sm text-red-700 text-center">
                                        Ù„Ø¯ÙŠÙƒ {gameState.loans.filter(loan => !loan.paidThisMonth).length} Ù‚Ø³Ø· ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹
                                        - Ø¥Ø¬Ù…Ø§Ù„ÙŠ: {formatCurrency(gameState.loans.filter(loan => !loan.paidThisMonth).reduce((sum, loan) => sum + loan.monthlyPayment, 0))}
                                    </p>
                                </div>
                            )}

                            {gameState.customerSatisfaction < 30 && (
                                <div className="bg-purple-50 border-2 border-purple-400 rounded-2xl p-4 shadow-lg notification-enter">
                                    <div className="flex items-center justify-center mb-2">
                                        <span className="text-2xl mr-2">ğŸ˜</span>
                                        <h3 className="text-lg font-bold text-purple-800">Ø±Ø¶Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù…Ù†Ø®ÙØ¶ Ø¬Ø¯Ø§Ù‹!</h3>
                                    </div>
                                    <p className="text-sm text-purple-700 text-center">
                                        Ø±Ø¶Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ {Math.round(gameState.customerSatisfaction)}% - ÙÙƒØ± ÙÙŠ ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø£Ùˆ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø©
                                    </p>
                                </div>
                            )}

                            {gameState.compliance < 30 && (
                                <div className="bg-gray-50 border-2 border-gray-400 rounded-2xl p-4 shadow-lg notification-enter">
                                    <div className="flex items-center justify-center mb-2">
                                        <span className="text-2xl mr-2">âš–ï¸</span>
                                        <h3 className="text-lg font-bold text-gray-800">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„ Ù…Ù†Ø®ÙØ¶!</h3>
                                    </div>
                                    <p className="text-sm text-gray-700 text-center">
                                        Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„ {Math.round(gameState.compliance)}% - ØªØ¬Ù†Ø¨ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡ Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø³Ù…Ø¹Ø©
                                    </p>
                                </div>
                            )}

                            {gameState.cash < 10000 && calculateTotalDebt() > 0 && (
                                <div className="bg-red-50 border-2 border-red-600 rounded-2xl p-4 shadow-lg notification-enter animate-pulse">
                                    <div className="flex items-center justify-center mb-2">
                                        <span className="text-2xl mr-2">ğŸ’¸</span>
                                        <h3 className="text-lg font-bold text-red-800">Ø£Ø²Ù…Ø© Ø³ÙŠÙˆÙ„Ø©!</h3>
                                    </div>
                                    <p className="text-sm text-red-700 text-center">
                                        Ø§Ù„Ù†Ù‚Ø¯ Ù…Ù†Ø®ÙØ¶ Ø¬Ø¯Ø§Ù‹ ({formatCurrency(gameState.cash)}) Ù…Ø¹ Ø¯ÙŠÙˆÙ† Ù‚Ø§Ø¦Ù…Ø© - Ø®Ø·Ø± Ø§Ù„Ø¥ÙÙ„Ø§Ø³!
                                    </p>
                                </div>
                            )}

                            {gameState.currentEvent && (
                                <div className="bg-yellow-50 border-2 border-yellow-400 rounded-2xl p-6 shadow-lg market-expansion">
                                    <div className="flex items-center justify-center mb-3">
                                        <span className="text-3xl mr-3">ğŸ²</span>
                                        <h3 className="text-xl font-bold text-yellow-800">Ø­Ø¯Ø« Ø§Ù„Ù…Ø³ØªÙˆÙ‰ {gameState.level}</h3>
                                    </div>
                                    <p className="text-lg font-semibold text-yellow-700 text-center mb-2">{gameState.currentEvent.name}</p>
                                    <p className="text-sm text-yellow-600 text-center">{gameState.currentEvent.description}</p>
                                </div>
                            )}

                            {/* Ø¹Ø±Ø¶ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© */}
                            <div className={`${getCurrentLevel().cardColor} border-2 rounded-2xl p-6 shadow-lg`}>
                                <h3 className="text-xl font-bold text-gray-800 text-center mb-4">ØªØ­Ø¯ÙŠØ§Øª {getCurrentLevel().name}</h3>
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    {getCurrentLevel().challenges.map((challenge, index) => (
                                        <div key={index} className="bg-white rounded-lg p-3 text-center">
                                            <p className="text-sm font-semibold text-gray-700">{challenge}</p>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */}
                        <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 mb-6">
                            <div className="card-gradient rounded-2xl p-4 shadow-lg card-hover">
                                <div className="flex items-center mb-2">
                                    <span className="text-2xl mr-2">ğŸ’°</span>
                                    <h3 className="text-sm font-semibold text-gray-700">Ø§Ù„Ù†Ù‚Ø¯</h3>
                                </div>
                                <p className="text-lg font-bold text-green-600 ltr text-shadow">{formatCurrency(gameState.cash)}</p>
                            </div>
                            <div className="card-gradient rounded-2xl p-4 shadow-lg card-hover">
                                <div className="flex items-center mb-2">
                                    <span className="text-2xl mr-2">ğŸ“ˆ</span>
                                    <h3 className="text-sm font-semibold text-gray-700">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h3>
                                </div>
                                <p className="text-lg font-bold text-blue-600 ltr text-shadow">{formatCurrency(gameState.totalRevenue)}</p>
                            </div>
                            <div className="card-gradient rounded-2xl p-4 shadow-lg card-hover">
                                <div className="flex items-center mb-2">
                                    <span className="text-2xl mr-2">ğŸ‘·</span>
                                    <h3 className="text-sm font-semibold text-gray-700">Ø§Ù„Ø¹Ù…Ø§Ù„</h3>
                                </div>
                                <p className="text-lg font-bold text-orange-600 text-shadow">{gameState.workers}/{getMaxWorkers()}</p>
                            </div>
                            <div className="card-gradient rounded-2xl p-4 shadow-lg card-hover">
                                <div className="flex items-center mb-2">
                                    <span className="text-2xl mr-2">ğŸª</span>
                                    <h3 className="text-sm font-semibold text-gray-700">Ø§Ù„Ø³ÙˆÙ‚</h3>
                                </div>
                                <p className="text-lg font-bold text-purple-600 text-shadow">Ã—{getMarketMultiplier()}</p>
                            </div>
                            <div className="card-gradient rounded-2xl p-4 shadow-lg card-hover">
                                <div className="flex items-center mb-2">
                                    <span className="text-2xl mr-2">ğŸ“¦</span>
                                    <h3 className="text-sm font-semibold text-gray-700">Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…</h3>
                                </div>
                                <p className="text-lg font-bold text-blue-600 text-shadow">{gameState.rawInventory}</p>
                            </div>
                            <div className="card-gradient rounded-2xl p-4 shadow-lg card-hover">
                                <div className="flex items-center mb-2">
                                    <span className="text-2xl mr-2">ğŸ“‹</span>
                                    <h3 className="text-sm font-semibold text-gray-700">Ø§Ù„Ø¨Ø¶Ø§Ø¦Ø¹</h3>
                                </div>
                                <p className="text-lg font-bold text-purple-600 text-shadow">{gameState.finishedInventory}</p>
                            </div>
                            <div className="card-gradient rounded-2xl p-4 shadow-lg card-hover">
                                <div className="flex items-center mb-2">
                                    <span className="text-2xl mr-2">ğŸ˜Š</span>
                                    <h3 className="text-sm font-semibold text-gray-700">Ø±Ø¶Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>
                                </div>
                                <p className="text-lg font-bold text-pink-600 text-shadow">{Math.round(gameState.customerSatisfaction)}%</p>
                            </div>
                            <div className="card-gradient rounded-2xl p-4 shadow-lg card-hover">
                                <div className="flex items-center mb-2">
                                    <span className="text-2xl mr-2">ğŸ¢</span>
                                    <h3 className="text-sm font-semibold text-gray-700">Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¤Ø³Ø³Ø©</h3>
                                </div>
                                <p className="text-lg font-bold text-indigo-600 ltr text-shadow">{formatCurrency(calculateEV())}</p>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            {/* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */}
                            <div className="bg-white rounded-2xl p-6 shadow-lg">
                                <h2 className="text-2xl font-bold text-gray-800 mb-4">ğŸ® Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
                                
                                {gameState.day === 0 && (
                                    <div className="mb-4">
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">
                                            Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù… Ù„Ù„Ø´Ø±Ø§Ø¡ (Ø§Ù„ØªÙƒÙ„ÙØ©: {formatCurrency(gameState.rawUnitCost)}/ÙˆØ­Ø¯Ø©)
                                        </label>
                                        <input
                                            type="number"
                                            min="0"
                                            value={inputs.procurement}
                                            onChange={(e) => setInputs(prev => ({...prev, procurement: parseInt(e.target.value) || 0}))}
                                            className="w-full px-4 py-3 input-enhanced rounded-xl focus:ring-2 focus:ring-blue-500 text-center font-semibold text-lg"
                                            placeholder="0"
                                        />
                                        <p className="text-xs text-gray-500 mt-1">
                                            Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©: {formatCurrency(inputs.procurement * gameState.rawUnitCost)}
                                        </p>
                                    </div>
                                )}

                                {gameState.day === 1 && (
                                    <div className="mb-4">
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">
                                            Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…Ø±Ø§Ø¯ Ø¥Ù†ØªØ§Ø¬Ù‡Ø§ (Ø§Ù„Ø³Ø¹Ø©: {gameState.capacity}ØŒ Ø§Ù„Ù…ØªØ§Ø­: {gameState.rawInventory})
                                        </label>
                                        <input
                                            type="number"
                                            min="0"
                                            max={Math.min(gameState.capacity, gameState.rawInventory)}
                                            value={inputs.production}
                                            onChange={(e) => setInputs(prev => ({...prev, production: parseInt(e.target.value) || 0}))}
                                            className="w-full px-4 py-3 input-enhanced rounded-xl focus:ring-2 focus:ring-blue-500 text-center font-semibold text-lg"
                                            placeholder="0"
                                        />
                                    </div>
                                )}

                                {gameState.day === 3 && (
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-semibold text-gray-700 mb-2">
                                                Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø© (Ø§Ù„Ù…Ø±Ø¬Ø¹: {formatCurrency(GAME_CONFIG.REFERENCE_PRICE)})
                                                {gameState.levelFeatures.premiumProducts && (
                                                    <span className="text-green-600 font-bold"> +40% Ù…Ù†ØªØ¬Ø§Øª Ù…ØªÙ…ÙŠØ²Ø©</span>
                                                )}
                                            </label>
                                            <input
                                                type="number"
                                                min="1"
                                                value={inputs.price}
                                                onChange={(e) => setInputs(prev => ({...prev, price: parseInt(e.target.value) || 1}))}
                                                className="w-full px-4 py-3 input-enhanced rounded-xl focus:ring-2 focus:ring-blue-500 text-center font-semibold text-lg"
                                                placeholder="85"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-semibold text-gray-700 mb-2">
                                                Ø¥Ù†ÙØ§Ù‚ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ 
                                                {gameState.levelFeatures.digitalMarketing ? 
                                                    " (6 Ø¯Ø¬ = Ø¹Ù…ÙŠÙ„ ÙˆØ§Ø­Ø¯ - ØªØ³ÙˆÙŠÙ‚ Ø±Ù‚Ù…ÙŠ)" : 
                                                    " (8 Ø¯Ø¬ = Ø¹Ù…ÙŠÙ„ ÙˆØ§Ø­Ø¯)"
                                                }
                                            </label>
                                            <input
                                                type="number"
                                                min="0"
                                                value={inputs.marketing}
                                                onChange={(e) => setInputs(prev => ({...prev, marketing: parseInt(e.target.value) || 0}))}
                                                className="w-full px-4 py-3 input-enhanced rounded-xl focus:ring-2 focus:ring-blue-500 text-center font-semibold text-lg"
                                                placeholder="0"
                                            />
                                            <p className="text-xs text-gray-500 mt-1">
                                                Ø¹Ù…Ù„Ø§Ø¡ Ø¥Ø¶Ø§ÙÙŠÙˆÙ†: {Math.floor(inputs.marketing / (gameState.levelFeatures.digitalMarketing ? 6 : 8))} Ø¹Ù…ÙŠÙ„
                                            </p>
                                        </div>
                                    </div>
                                )}

                                {gameState.day === 4 && (
                                    <div className="mb-4">
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">Ù‚Ù†Ø§Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</label>
                                        <div className="space-y-3">
                                            <button
                                                onClick={() => setGameState(prev => ({...prev, salesChannel: 'legal'}))}
                                                className={`w-full px-4 py-3 rounded-xl font-semibold transition-all duration-300 hover-scale shadow-md ${
                                                    gameState.salesChannel === 'legal' 
                                                        ? 'bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg' 
                                                        : 'bg-gradient-to-r from-gray-200 to-gray-300 text-gray-700 hover:from-gray-300 hover:to-gray-400'
                                                }`}
                                            >
                                                âœ… Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ (Ø¢Ù…Ù†ØŒ Ù…Ø­Ø¯ÙˆØ¯)
                                                {gameState.levelFeatures.retailStores > 0 && (
                                                    <div className="text-xs mt-1">
                                                        + {gameState.levelFeatures.retailStores} Ù…ØªØ¬Ø± ØªØ¬Ø²Ø¦Ø©
                                                    </div>
                                                )}
                                            </button>
                                            <button
                                                onClick={() => setGameState(prev => ({...prev, salesChannel: 'black'}))}
                                                className={`w-full px-4 py-3 rounded-xl font-semibold transition-all duration-300 hover-scale shadow-md ${
                                                    gameState.salesChannel === 'black' 
                                                        ? 'bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg animate-pulse-custom' 
                                                        : 'bg-gradient-to-r from-gray-200 to-gray-300 text-gray-700 hover:from-gray-300 hover:to-gray-400'
                                                }`}
                                            >
                                                âš ï¸ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡ (Ù…Ø­ÙÙˆÙ Ø¨Ø§Ù„Ù…Ø®Ø§Ø·Ø±ØŒ Ù…Ù…ÙŠØ²)
                                            </button>
                                        </div>
                                    </div>
                                )}

                                <div className="space-y-3 mt-6">
                                    <button
                                        onClick={executeDay}
                                        className="w-full btn-primary text-white font-bold py-4 px-6 rounded-xl hover-scale animate-wiggle text-lg shadow-lg"
                                    >
                                        âš¡ ØªÙ†ÙÙŠØ° {DAY_ACTIVITIES[gameState.day]}
                                    </button>
                                    
                                    <button
                                        onClick={nextDay}
                                        className="w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 hover-scale shadow-lg"
                                    >
                                        â­ï¸ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ
                                    </button>
                                    
                                    <div className="space-y-3 bg-purple-50 rounded-xl p-4 border-2 border-purple-200">
                                        <div className="text-center">
                                            <span className="text-2xl">ğŸ’°</span>
                                            <p className="text-sm font-semibold text-purple-800 mt-1">
                                                Ø£Ø®Ø° Ù‚Ø±Ø¶ ({gameState.loansUsed}/{GAME_CONFIG.MAX_LOANS})
                                            </p>
                                        </div>
                                        <div className="grid grid-cols-2 gap-2">
                                            <button
                                                onClick={() => takeLoan(50000)}
                                                disabled={gameState.loansUsed >= GAME_CONFIG.MAX_LOANS}
                                                className="bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-bold py-2 px-2 text-sm rounded-lg transition-all duration-300 hover-scale shadow-md"
                                            >
                                                50K
                                            </button>
                                            <button
                                                onClick={() => takeLoan(100000)}
                                                disabled={gameState.loansUsed >= GAME_CONFIG.MAX_LOANS}
                                                className="bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 disabled:from-gray-400 disabled:to-gray-500 text-white font-bold py-2 px-2 text-sm rounded-lg transition-all duration-300 hover-scale shadow-md"
                                            >
                                                100K
                                            </button>
                                            <button
                                                onClick={() => takeLoan(250000)}
                                                disabled={gameState.loansUsed >= GAME_CONFIG.MAX_LOANS}
                                                className="bg-gradient-to-r from-purple-800 to-purple-900 hover:from-purple-900 hover:to-black disabled:from-gray-400 disabled:to-gray-500 text-white font-bold py-2 px-2 text-sm rounded-lg transition-all duration-300 hover-scale shadow-md"
                                            >
                                                250K
                                            </button>
                                            <button
                                                onClick={() => takeLoan(500000)}
                                                disabled={gameState.loansUsed >= GAME_CONFIG.MAX_LOANS}
                                                className="bg-gradient-to-r from-purple-900 to-black hover:from-black hover:to-purple-900 disabled:from-gray-400 disabled:to-gray-500 text-white font-bold py-2 px-2 text-sm rounded-lg transition-all duration-300 hover-scale shadow-md"
                                            >
                                                500K
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                {/* Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ø§Ù„ */}
                                <div className="mt-6 p-4 bg-orange-50 rounded-lg">
                                    <h3 className="font-semibold text-orange-800 mb-3">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ø§Ù„</h3>
                                    <div className="space-y-2">
                                        <p className="text-sm text-orange-700">
                                            Ø§Ù„Ø¹Ù…Ø§Ù„: {gameState.workers}/{getMaxWorkers()} â€¢ Ø§Ù„Ù‚Ø¯Ø±Ø©: {gameState.capacity} ÙˆØ­Ø¯Ø©/Ø£Ø³Ø¨ÙˆØ¹
                                        </p>
                                        
                                        <div className="flex gap-2 mt-3">
                                            <input
                                                type="number"
                                                min="0"
                                                max={getMaxWorkers() - gameState.workers}
                                                value={inputs.hireWorkers}
                                                onChange={(e) => setInputs(prev => ({...prev, hireWorkers: parseInt(e.target.value) || 0}))}
                                                placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ø§Ù„"
                                                className="flex-1 px-2 py-1 text-sm border border-orange-300 rounded focus:ring-2 focus:ring-orange-500"
                                            />
                                            <button
                                                onClick={hireWorkers}
                                                disabled={inputs.hireWorkers <= 0 || gameState.cash < inputs.hireWorkers * GAME_CONFIG.RECRUITMENT_COST || gameState.workers >= getMaxWorkers()}
                                                className="bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 text-white font-bold py-1 px-3 text-sm rounded transition-colors"
                                            >
                                                ØªÙˆØ¸ÙŠÙ
                                            </button>
                                        </div>
                                        <p className="text-xs text-orange-600">
                                            ØªÙƒÙ„ÙØ© Ø§Ù„ØªÙˆØ¸ÙŠÙ: {formatCurrency(GAME_CONFIG.RECRUITMENT_COST)}/Ø¹Ø§Ù…Ù„
                                        </p>
                                    </div>
                                </div>
                            </div>

                            {/* Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆÙ‰ */}
                            <div className="bg-white rounded-2xl p-6 shadow-lg">
                                <h2 className="text-2xl font-bold text-gray-800 mb-4">ğŸš€ Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆÙ‰ {gameState.level}</h2>
                                
                                {LEVEL_FEATURES[gameState.level] && (
                                    <div className="space-y-4">
                                        {Object.entries(LEVEL_FEATURES[gameState.level]).map(([key, feature]) => (
                                            <div key={key} className="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-200">
                                                <div className="flex justify-between items-start mb-2">
                                                    <div>
                                                        <h3 className="font-bold text-indigo-800">{feature.name}</h3>
                                                        <p className="text-sm text-indigo-600">{feature.description}</p>
                                                        <p className="text-sm font-semibold text-indigo-700">
                                                            Ø§Ù„ØªÙƒÙ„ÙØ©: {formatCurrency(feature.cost)}
                                                        </p>
                                                        {key === 'retailStores' && gameState.levelFeatures.retailStores > 0 && (
                                                            <p className="text-sm text-green-600 font-semibold">
                                                                âœ… Ù„Ø¯ÙŠÙƒ {gameState.levelFeatures.retailStores} Ù…ØªØ¬Ø±
                                                            </p>
                                                        )}
                                                        {key !== 'retailStores' && gameState.levelFeatures[key] && (
                                                            <p className="text-sm text-green-600 font-semibold">âœ… Ù…ÙØ¹Ù„</p>
                                                        )}
                                                    </div>
                                                    <button
                                                        onClick={() => buyLevelFeature(key)}
                                                        disabled={gameState.cash < feature.cost || (key !== 'retailStores' && gameState.levelFeatures[key])}
                                                        className="bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white font-bold py-2 px-4 text-sm rounded-lg transition-colors"
                                                    >
                                                        {key === 'retailStores' ? 'Ø´Ø±Ø§Ø¡ Ù…ØªØ¬Ø±' : 'Ø´Ø±Ø§Ø¡'}
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}

                                {!LEVEL_FEATURES[gameState.level] && (
                                    <div className="text-center py-8">
                                        <p className="text-gray-500">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙŠØ²Ø§Øª Ø®Ø§ØµØ© Ù…ØªØ§Ø­Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰</p>
                                        <p className="text-sm text-gray-400 mt-2">Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù…Ùˆ Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ!</p>
                                    </div>
                                )}

                                {/* Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ */}
                                {gameState.level < 5 && (
                                    <div className="mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-300">
                                        <h3 className="font-bold text-yellow-800 mb-2">ğŸ¯ Ø´Ø±ÙˆØ· Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ:</h3>
                                        <div className="text-sm text-yellow-700 space-y-1">
                                            {gameState.level === 1 && (
                                                <>
                                                    <p>â€¢ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø´Ù‡Ø± 12 âœ“</p>
                                                    <p>â€¢ Ø§Ù…ØªÙ„Ø§Ùƒ {formatCurrency(100000)} Ù†Ù‚Ø¯Ø§Ù‹ {gameState.cash >= 100000 ? 'âœ…' : 'âŒ'}</p>
                                                </>
                                            )}
                                            {gameState.level === 2 && (
                                                <>
                                                    <p>â€¢ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø´Ù‡Ø± 24 {gameState.month >= 24 ? 'âœ…' : 'âŒ'}</p>
                                                    <p>â€¢ ØªØ­Ù‚ÙŠÙ‚ {formatCurrency(500000)} Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© {gameState.totalRevenue >= 500000 ? 'âœ…' : 'âŒ'}</p>
                                                </>
                                            )}
                                            {gameState.level === 3 && (
                                                <>
                                                    <p>â€¢ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø´Ù‡Ø± 36 {gameState.month >= 36 ? 'âœ…' : 'âŒ'}</p>
                                                    <p>â€¢ ØªÙˆØ¸ÙŠÙ 50 Ø¹Ø§Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ {gameState.workers >= 50 ? 'âœ…' : 'âŒ'}</p>
                                                </>
                                            )}
                                            {gameState.level === 4 && (
                                                <>
                                                    <p>â€¢ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø´Ù‡Ø± 48 {gameState.month >= 48 ? 'âœ…' : 'âŒ'}</p>
                                                    <p>â€¢ Ù‚ÙŠÙ…Ø© Ù…Ø¤Ø³Ø³Ø© {formatCurrency(2000000)} {calculateEV() >= 2000000 ? 'âœ…' : 'âŒ'}</p>
                                                </>
                                            )}
                                        </div>
                                    </div>
                                )}
                            </div>

                            {/* Ø§Ù„Ù…Ù„Ø®Øµ ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */}
                            <div className="bg-white rounded-2xl p-6 shadow-lg">
                                <h2 className="text-2xl font-bold text-gray-800 mb-4">ğŸ“Š Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø´Ù‡Ø±ÙŠ</h2>
                                
                                <div className="space-y-3">
                                    <div className="bg-blue-50 rounded-lg p-3">
                                        <h3 className="font-semibold text-blue-800">Ø§Ù„ØµØ­Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h3>
                                        <p className="text-sm text-blue-700">Ø§Ù„Ù†Ù‚Ø¯: {formatCurrency(gameState.cash)}</p>
                                        <p className="text-sm text-blue-700">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª: {formatCurrency(gameState.totalRevenue)}</p>
                                        <p className="text-sm text-blue-700">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©: {formatCurrency(gameState.month > 0 ? gameState.totalRevenue / gameState.month : 0)}</p>
                                        <p className="text-sm text-blue-700">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙŠÙˆÙ†: {formatCurrency(calculateTotalDebt())}</p>
                                        <p className="text-sm text-blue-700">Ø§Ù„Ø£Ù‚Ø³Ø§Ø· Ø§Ù„Ø´Ù‡Ø±ÙŠØ©: {formatCurrency(calculateMonthlyPayments())}</p>
                                        <p className="text-sm text-blue-700 font-bold">Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¤Ø³Ø³Ø©: {formatCurrency(calculateEV())}</p>
                                    </div>
                                    
                                    <div className="bg-green-50 rounded-lg p-3">
                                        <h3 className="font-semibold text-green-800">Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h3>
                                        <p className="text-sm text-green-700">Ø§Ù„Ø¹Ù…Ø§Ù„: {gameState.workers}/{getMaxWorkers()}</p>
                                        <p className="text-sm text-green-700">Ø§Ù„Ù‚Ø¯Ø±Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©: {gameState.capacity} ÙˆØ­Ø¯Ø©/Ø£Ø³Ø¨ÙˆØ¹</p>
                                        <p className="text-sm text-green-700">Ø­Ø¬Ù… Ø§Ù„Ø³ÙˆÙ‚: Ã—{getMarketMultiplier()}</p>
                                        <p className="text-sm text-green-700">Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚: {(gameState.marketShare * 100).toFixed(1)}%</p>
                                        <p className="text-sm text-green-700">Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„: {Math.round(gameState.compliance)}%</p>
                                    </div>

                                    <div className="bg-orange-50 rounded-lg p-3">
                                        <h3 className="font-semibold text-orange-800">ğŸ’° Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</h3>
                                        <p className="text-sm text-orange-700">Ø±ÙˆØ§ØªØ¨ Ø§Ù„Ø¹Ù…Ø§Ù„: {formatCurrency(gameState.workers * GAME_CONFIG.WORKER_MONTHLY_SALARY)}</p>
                                        <p className="text-sm text-orange-700">Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„ÙˆØ±Ø´Ø©: {formatCurrency(GAME_CONFIG.WORKSHOP_RENT)}</p>
                                        <p className="text-sm text-orange-700">Ø£Ù‚Ø³Ø§Ø· Ø§Ù„Ù‚Ø±ÙˆØ¶: {formatCurrency(calculateMonthlyPayments())}</p>
                                        <p className="text-sm text-orange-700 font-bold">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ: {formatCurrency(gameState.workers * GAME_CONFIG.WORKER_MONTHLY_SALARY + GAME_CONFIG.WORKSHOP_RENT + calculateMonthlyPayments())}</p>
                                    </div>

                                    <div className="bg-cyan-50 rounded-lg p-3">
                                        <h3 className="font-semibold text-cyan-800">ğŸ“¦ ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ø¥Ù†ØªØ§Ø¬</h3>
                                        <p className="text-sm text-cyan-700">Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø®Ø§Ù…: {formatCurrency(gameState.rawUnitCost)}/ÙˆØ­Ø¯Ø©</p>
                                        <p className="text-sm text-cyan-700">Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ù…ØªØºÙŠØ±Ø©: {formatCurrency(gameState.variableCost)}/ÙˆØ­Ø¯Ø©</p>
                                        <p className="text-sm text-cyan-700">Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø«Ø§Ø¨ØªØ© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©: {formatCurrency(GAME_CONFIG.FIXED_WEEKLY_COST)}</p>
                                        <p className="text-sm text-cyan-700">Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ: {Math.round(gameState.baseDemand * getMarketMultiplier())} ÙˆØ­Ø¯Ø©/Ø£Ø³Ø¨ÙˆØ¹</p>
                                    </div>
                                    
                                    <div className="bg-purple-50 rounded-lg p-3">
                                        <h3 className="font-semibold text-purple-800">Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ÙØ¹Ù„Ø©</h3>
                                        {gameState.levelFeatures.retailStores > 0 && (
                                            <p className="text-sm text-purple-700">ğŸª Ù…ØªØ§Ø¬Ø± Ø§Ù„ØªØ¬Ø²Ø¦Ø©: {gameState.levelFeatures.retailStores}</p>
                                        )}
                                        {gameState.levelFeatures.digitalMarketing && (
                                            <p className="text-sm text-purple-700">ğŸ“± Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ</p>
                                        )}
                                        {gameState.levelFeatures.export && (
                                            <p className="text-sm text-purple-700">ğŸŒ Ø§Ù„ØªØµØ¯ÙŠØ±</p>
                                        )}
                                        {gameState.levelFeatures.premiumProducts && (
                                            <p className="text-sm text-purple-700">â­ Ù…Ù†ØªØ¬Ø§Øª Ù…ØªÙ…ÙŠØ²Ø©</p>
                                        )}
                                        {gameState.levelFeatures.venture && (
                                            <p className="text-sm text-purple-700">ğŸ’ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</p>
                                        )}
                                        {Object.values(gameState.levelFeatures).every(feature => 
                                            (typeof feature === 'boolean' && !feature) || 
                                            (typeof feature === 'number' && feature === 0)
                                        ) && (
                                            <p className="text-sm text-gray-500 italic">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙŠØ²Ø§Øª Ù…ÙØ¹Ù„Ø©</p>
                                        )}
                                    </div>

                                    <div className="bg-indigo-50 rounded-lg p-3">
                                        <h3 className="font-semibold text-indigo-800">ğŸ“Š ØªÙØ§ØµÙŠÙ„ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø¤Ø³Ø³Ø©</h3>
                                        <div className="text-xs text-indigo-700 space-y-1">
                                            <p>â€¢ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ø´Ù‡Ø±ÙŠ Ø§Ù„Ù…Ù‚Ø¯Ø±: {formatCurrency(Math.max(0, (gameState.month > 0 ? gameState.totalRevenue / gameState.month : 0) - ((gameState.workers * GAME_CONFIG.WORKER_MONTHLY_SALARY) + GAME_CONFIG.WORKSHOP_RENT + calculateMonthlyPayments())))}</p>
                                            <p>â€¢ Ù…Ø¶Ø§Ø¹Ù Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: {(8 + (gameState.level - 1) * 2).toFixed(1)}x (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ {gameState.level})</p>
                                            <p>â€¢ ØªØ£Ø«ÙŠØ± Ø±Ø¶Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡: {((gameState.customerSatisfaction / 100) * 100).toFixed(0)}%</p>
                                            <p>â€¢ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø³Ù…Ø¹Ø©: {((gameState.compliance / 100) * 100).toFixed(0)}%</p>
                                            <p>â€¢ Ù…ÙƒØ§ÙØ£Ø© Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚: +{(gameState.marketShare * 200).toFixed(0)}%</p>
                                            <p>â€¢ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø£ØµÙˆÙ„: {formatCurrency(gameState.workers * 5000 + gameState.rawInventory * gameState.rawUnitCost + gameState.finishedInventory * gameState.unitPrice * 0.8)}</p>
                                            <p>â€¢ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙŠÙˆÙ† Ù„Ù„Ø¯Ø®Ù„: {(calculateTotalDebt() / Math.max(1, gameState.cash + (gameState.month > 0 ? gameState.totalRevenue / gameState.month : 0))).toFixed(2)}</p>
                                        </div>
                                    </div>

                                    {/* Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ© */}
                                    <div className="bg-yellow-50 rounded-lg p-3">
                                        <h3 className="font-semibold text-yellow-800">ğŸ’³ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</h3>
                                        <div className="space-y-2">
                                            <div className="flex items-center justify-between">
                                                <span className="text-sm text-yellow-700">
                                                    Ø±ÙˆØ§ØªØ¨ Ø§Ù„Ø¹Ù…Ø§Ù„ ({formatCurrency(gameState.workers * GAME_CONFIG.WORKER_MONTHLY_SALARY)}) {gameState.salariesPaid ? 'âœ…' : 'âŒ'}
                                                </span>
                                                <button
                                                    onClick={paySalaries}
                                                    disabled={gameState.salariesPaid || gameState.cash < gameState.workers * GAME_CONFIG.WORKER_MONTHLY_SALARY || gameState.workers === 0}
                                                    className="bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-400 text-white font-bold py-1 px-2 text-xs rounded"
                                                >
                                                    Ø¯ÙØ¹
                                                </button>
                                            </div>
                                            
                                            <div className="flex items-center justify-between">
                                                <span className="text-sm text-yellow-700">
                                                    Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„ÙˆØ±Ø´Ø© ({formatCurrency(GAME_CONFIG.WORKSHOP_RENT)}) {gameState.rentPaid ? 'âœ…' : 'âŒ'}
                                                </span>
                                                <button
                                                    onClick={payRent}
                                                    disabled={gameState.rentPaid || gameState.cash < GAME_CONFIG.WORKSHOP_RENT}
                                                    className="bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-400 text-white font-bold py-1 px-2 text-xs rounded"
                                                >
                                                    Ø¯ÙØ¹
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Ø£Ù‚Ø³Ø§Ø· Ø§Ù„Ù‚Ø±ÙˆØ¶ */}
                                    {gameState.loans.length > 0 && (
                                        <div className="bg-red-50 rounded-lg p-3">
                                            <h3 className="font-semibold text-red-800">ğŸ’³ Ø£Ù‚Ø³Ø§Ø· Ø§Ù„Ù‚Ø±ÙˆØ¶</h3>
                                            <div className="space-y-2">
                                                {gameState.loans.map((loan, index) => (
                                                    <div key={index} className="bg-white rounded p-2">
                                                        <div className="flex items-center justify-between mb-1">
                                                            <span className="text-xs text-red-700 font-semibold">
                                                                Ù‚Ø±Ø¶ #{index + 1} {loan.paidThisMonth ? 'âœ…' : 'âŒ'}
                                                            </span>
                                                            <button
                                                                onClick={() => payLoanInstallment(index)}
                                                                disabled={loan.paidThisMonth || gameState.cash < loan.monthlyPayment}
                                                                className="bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-bold py-1 px-2 text-xs rounded"
                                                            >
                                                                Ø³Ø¯Ø§Ø¯
                                                            </button>
                                                        </div>
                                                        <div className="text-xs text-red-600 space-y-1">
                                                            <p>Ø§Ù„Ù‚Ø³Ø· Ø§Ù„Ø´Ù‡Ø±ÙŠ: {formatCurrency(loan.monthlyPayment)}</p>
                                                            <p>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: {formatCurrency(loan.totalDebt)}</p>
                                                            <p>Ø§Ù„Ø£Ø´Ù‡Ø± Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: {loan.remainingMonths}</p>
                                                            {loan.missedPayments > 0 && (
                                                                <p className="text-red-800 font-bold">Ø£Ù‚Ø³Ø§Ø· Ù…ØªØ£Ø®Ø±Ø©: {loan.missedPayments}</p>
                                                            )}
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    )}

                                    {/* Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© */}
                                    <div className="bg-pink-50 rounded-lg p-3">
                                        <h3 className="font-semibold text-pink-800">ğŸ› ï¸ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</h3>
                                        <div className="space-y-2">
                                            <div className="flex items-center justify-between">
                                                <span className="text-sm text-pink-700">
                                                    ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (+15% Ø±Ø¶Ø§)
                                                </span>
                                                <button
                                                    onClick={compensateCustomers}
                                                    disabled={gameState.cash < GAME_CONFIG.CUSTOMER_COMPENSATION_COST}
                                                    className="bg-pink-600 hover:bg-pink-700 disabled:bg-gray-400 text-white font-bold py-1 px-2 text-xs rounded"
                                                >
                                                    {formatCurrency(GAME_CONFIG.CUSTOMER_COMPENSATION_COST)}
                                                </button>
                                            </div>
                                            
                                            <div className="flex items-center justify-between">
                                                <span className="text-sm text-pink-700">
                                                    ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø© (4 Ø£Ø³Ø§Ø¨ÙŠØ¹)
                                                </span>
                                                <button
                                                    onClick={investInQuality}
                                                    disabled={gameState.cash < GAME_CONFIG.QUALITY_IMPROVEMENT_COST || gameState.qualityImprovement}
                                                    className="bg-pink-600 hover:bg-pink-700 disabled:bg-gray-400 text-white font-bold py-1 px-2 text-xs rounded"
                                                >
                                                    {formatCurrency(GAME_CONFIG.QUALITY_IMPROVEMENT_COST)}
                                                </button>
                                            </div>
                                            
                                            {gameState.qualityImprovement && (
                                                <div className="bg-green-100 rounded p-2">
                                                    <p className="text-xs text-green-800">
                                                        ğŸ”§ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø© Ù†Ø´Ø·: {gameState.qualityImprovement.weeksLeft} Ø£Ø³Ø§Ø¨ÙŠØ¹ Ù…ØªØ¨Ù‚ÙŠØ©
                                                    </p>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>

                                {/* Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹ Ø§Ù„Ø£Ø®ÙŠØ±Ø© */}
                                {gameState.weekResults.length > 0 && (
                                    <div className="mt-4">
                                        <h3 className="font-semibold text-gray-800 mb-2">ğŸ“ˆ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹ Ø§Ù„Ø£Ø®ÙŠØ±Ø©</h3>
                                        <div className="space-y-2 max-h-40 overflow-y-auto">
                                            {gameState.weekResults.slice(-4).map((result, index) => (
                                                <div key={index} className="bg-gray-50 rounded-lg p-2 text-xs">
                                                    <p className="font-semibold">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ {result.week}: {result.unitsSold} ÙˆØ­Ø¯Ø© - {formatCurrency(result.revenue)}</p>
                                                    {result.fines > 0 && (
                                                        <p className="text-red-600 font-semibold">ØºØ±Ø§Ù…Ø©: {formatCurrency(result.fines)}</p>
                                                    )}
                                                    <p className="text-gray-600 italic">{result.notes}</p>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<CEOSimulation />, document.getElementById('root'));
    </script><!-- Footer -->
  <footer class="bg-gray-800 text-white py-4 mt-8">
   <div class="max-w-7xl mx-auto px-4 text-center">
    <p class="text-sm">Â© 2025 All Rights Reserved to Taher Mehdi</p>
   </div>
  </footer>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99f299ef43332822',t:'MTc2MzI1MDEwNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
